<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[mysql 36Êù°ÂÜõËßÑ]]></title>
    <url>%2F2018%2F01%2F02%2Fmysql%2Fmysql-36%E6%9D%A1%E5%86%9B%E8%A7%84%2F</url>
    <content type="text"><![CDATA[36Êù°ÂÜõËßÑÊ†∏ÂøÉÂÜõËßÑ ‰∏çÂú®Êï∞ÊçÆÂ∫ìÂÅöËøêÁÆó,Â∞ΩÂèØËÉΩÁÆÄÂçïÂ∫îÁî®mysql,Â§çÊùÇËøêÁÆóÁßªÂà∞Á®ãÂ∫èÊÆµ ‰∏æ‰æãÔºö 12md5();Order by Rand(); ÊéßÂà∂ÂçïË°®Êï∞ÊçÆÈáè 1231. intÂûã‰∏çË∂ÖËøá1000wÔºåÂê´charÂàô‰∏çË∂ÖËøá500w2. ÂêàÁêÜÂàÜË°®‰∏çË∂ÖËΩΩÔºåÂ∏∏Áî®ÂàÜË°®Á≠ñÁï•ÔºöUserID„ÄÅDATE„ÄÅAREA...3. ÈôêÂà∂ÂçïÂ∫ìË°®Êï∞ÈáèÂú®300‰ª•ÂÜÖÔºõ ÊéßÂà∂ÂàóÊï∞Èáè 1Ë°®Â≠óÊÆµÊï∞Â∞ëËÄåÁ≤æÔºöioÈ´òÊïà„ÄÅÂÖ®Ë°®ÈÅçÂéÜ„ÄÅË°®‰øÆÂ§çÂø´„ÄÅÊèêÈ´òÂπ∂Âèë„ÄÅalter tableÂø´ ÊãíÁªù3BÔºöÊãíÁªùÂ§ßSQLÔºåÂ§çÊùÇ‰∫ãÂä°ÔºåÂ§ßÊâπÈáè‰ªªÂä° Âπ≥Ë°°ËåÉÂºè‰∏éÂÜó‰Ωô Â≠óÊÆµÁ±ªÂÜõËßÑ Áî®Â•ΩÊï∞ÂÄºÂ≠óÊÆµÁ±ªÂûã tinyint(1Byte)„ÄÅsmallint(2Byte)„ÄÅmediumint(3Byte)„ÄÅint(4Byte)„ÄÅbigint(8Byte) 123456789‰∏æ‰æãÔºöbad caseint(1)/int(11)ÔºåÂ°´ÂÖÖÁöÑÊòØ0ÁöÑ‰∏™Êï∞‰∏æ‰æãÔºöÊó∂Èó¥Ê†ºÂºè‰∏≠timestamp„ÄÅdatetime„ÄÅintÁöÑÈÄâÊã©1. int: 4Â≠óËäÇ„ÄÅÁ¥¢ÂºïÂø´„ÄÅbetween„ÄÅËåÉÂõ¥ÂπøÔºåÈÄÇÂêàÈúÄË¶ÅËøõË°åÂ§ßÈáèÊó∂Èó¥ËåÉÂõ¥Êü•ËØ¢ÁöÑÊï∞ÊçÆË°®2. datetime: 8Â≠óËäÇ„ÄÅÊó∂Âå∫Êó†ÂÖ≥„ÄÅÁ¥¢ÂºïÊúÄÊÖ¢ÔºåËåÉÂõ¥ËæÉTimestampÂπø3. timestampÔºö4Â≠óËäÇ„ÄÅÊó∂Âå∫Áõ∏ÂÖ≥[UTCÂ≠òÂÇ®]ÔºåËåÉÂõ¥Âà∞2037Âπ¥ÔºåÁ¥¢ÂºïËæÉdatetimeÂø´ÔºåÂèØËá™Âä®Êõ¥Êñ∞ÔºåË∑®ÂõΩÂ∫îÁî®‰∏çÂêàÈÄÇ``` + Â≠óÁ¨¶ËΩ¨Âåñ‰∏∫Êï∞Â≠ó ‰∏æ‰æãÔºö Áî®Êó†Á¨¶Âè∑INTÂ≠òÂÇ®IPÔºåËÄåÈùûCHAR(15):Êï∞Â≠óÂûãVSÂ≠óÁ¨¶‰∏≤,Êõ¥È´òÊïà„ÄÅÊü•ËØ¢Êõ¥Âø´„ÄÅÂç†Áî®Á©∫Èó¥Êõ¥Â∞è123456+ ÈÅøÂÖç‰ΩøÁî®NULLÂ≠óÊÆµ,ÁâπÂà´ÊòØÁ¥¢ÂºïÂàóÈ¶ñÂÖàÔºåÊàë‰ª¨Ë¶ÅÊêûÊ∏ÖÊ•ö‚ÄúÁ©∫ÂÄº‚Äù Âíå ‚ÄúNULL‚Äù ÁöÑÊ¶ÇÂøµÔºö1„ÄÅÁ©∫ÂÄºÊòØ‰∏çÂç†Áî®Á©∫Èó¥ÁöÑ2„ÄÅMySQL‰∏≠ÁöÑNULLÂÖ∂ÂÆûÊòØÂç†Áî®Á©∫Èó¥ÁöÑ&gt; ÊâÄË∞ìÁöÑNULLÂ∞±ÊòØ‰ªÄ‰πàÈÉΩÊ≤°ÊúâÔºåËøû\0ÈÉΩÊ≤°ÊúâÔºå\0Âú®Â≠óÁ¨¶‰∏≤‰∏≠ÊòØÁªìÊùüÁ¨¶Ôºå‰ΩÜÊòØÂú®Áâ©ÁêÜÂÜÖÂ≠òÊòØÂç†Á©∫Èó¥ÁöÑÔºåÁ≠â‰∫é‰∏Ä‰∏™Â≠óËäÇÔºåËÄåNULLÂ∞±ÊòØËøûËøô‰∏Ä‰∏™Â≠óËäÇÈÉΩÊ≤°Êúâ„ÄÇÂú®Êï∞ÊçÆÂ∫ìÈáåÊòØ‰∏•Ê†ºÂå∫ÂàÜÁöÑÔºå‰ªª‰ΩïÊï∞Ë∑üNULLËøõË°åËøêÁÆóÈÉΩÊòØNULL, Âà§Êñ≠ÂÄºÊòØÂê¶Á≠â‰∫éNULLÔºå‰∏çËÉΩÁÆÄÂçïÁî®=ÔºåËÄåË¶ÅÁî®IS NULLÂÖ≥ÈîÆÂ≠ó„ÄÇ nullÂ≠óÊÆµÂæàÈöæËøõË°åÊü•ËØ¢‰ºòÂåñ: whereÂ≠êÂè•‰∏≠‰ΩøÁî®is nullÊàñis not nullÁöÑËØ≠Âè•‰ºòÂåñÂô®ÊòØ‰∏çÂÖÅËÆ∏‰ΩøÁî®Á¥¢ÂºïÁöÑ Null ÂàóÈúÄË¶ÅÊõ¥Â§öÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºöÈúÄË¶Å‰∏Ä‰∏™È¢ùÂ§ñÂ≠óËäÇ‰Ωú‰∏∫Âà§Êñ≠ÊòØÂê¶‰∏∫ NULL ÁöÑÊ†áÂøó‰Ωç NullÂ≠óÊÆµÁöÑÂ§çÂêàÁ¥¢ÂºïÊó†Êïà,Á¥¢Âºï‰∏ç‰ºöÂåÖÂê´ÊúâNULLÂÄºÁöÑÂàó Âè™Ë¶ÅÂàó‰∏≠ÂåÖÂê´ÊúâNULLÂÄºÈÉΩÂ∞Ü‰∏ç‰ºöË¢´ÂåÖÂê´Âú®Á¥¢Âºï‰∏≠ÔºåÁªìÊûúÈõÜ‰∏≠‰πü‰∏ç‰ºöÂåÖÂê´Ëøô‰∫õËÆ∞ÂΩï NOT INÂ≠êÊü•ËØ¢Âú®ÊúâNULLÂÄºÁöÑÊÉÖÂÜµ‰∏ãËøîÂõûÊ∞∏Ëøú‰∏∫Á©∫ÁªìÊûúÔºåÊü•ËØ¢ÂÆπÊòìÂá∫Èîô 1234567891011+ Â∞ëÁî®Âπ∂ÊãÜÂàÜTEXT/BLOBÔºåÂ∞ΩÈáè‰∏ç‰ΩøÁî®TEXT/BLOB,Ëã•ÂøÖÈ°ªÂàôÂ∞ΩÂèØËÉΩÊãÜÂàÜÂà∞ÂçïÁã¨ÁöÑË°®‰∏≠``` 1. TEXTÁ±ªÂûãÂ§ÑÁêÜÊÄßËÉΩËøú‰Ωé‰∫éVARCHARÔºàÂêÑËá™Â§ÑÁêÜËøáÁ®ãÔºâ 2. Âº∫Âà∂ÁîüÊàêÁ°¨Áõò‰∏¥Êó∂Ë°® 3. Êµ™Ë¥πÊõ¥Â§öÁ©∫Èó¥ VARCHAR(65535) == 64K (UFT8)``` + ‰∏çÂú®Êï∞ÊçÆÂ∫ì‰∏≠Â≠òÂõæÁâá## Á¥¢ÂºïÁ±ªÂÜõËßÑ+ Ë∞®ÊÖéÂêàÁêÜÁöÑÊ∑ªÂä†Á¥¢Âºï:ÊîπÂñÑÊü•ËØ¢ÔºåÂáèÊÖ¢Êõ¥Êñ∞ ÁªìÂêàÊ†∏ÂøÉsql‰ºòÂÖàËÄÉËôëË¶ÜÁõñÁ¥¢Âºï Â≠óÊÆµÂå∫ÂàÜÂ∫¶Ë¶ÅÂ§ßÔºåÁªºÂêàËØÑ‰º∞Êï∞ÊçÆÂØÜÂ∫¶ÂíåÊï∞ÊçÆÂàÜÂ∏É ÊúÄÂ•Ω‰∏çË∂ÖËøáÂ≠óÊÆµÊï∞20% Á¥¢ÂºïÂπ∂‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºåËÉΩ‰∏çÂä†ÁöÑÁ¥¢ÂºïÂ∞ΩÈáè‰∏çÂä† 1+ Ëá™Â¢ûÂàóÊàñËÄÖÂÖ®Â±ÄidÂÅöINNODB‰∏ªÈîÆ ‰∏ªÈîÆÂª∫Á´ãËÅöÁ∞áÁ¥¢ÂºïÔºõ ‰∏ªÈîÆ‰∏çÂ∫îËØ•Ë¢´‰øÆÊîπ,ÊåâËá™Â¢ûÈ°∫Â∫èÊèíÂÖ•ÂÄº,‰∫åÁ∫ßÁ¥¢ÂºïÂ≠òÂÇ®‰∏ªÈîÆÂÄº Â≠óÁ¨¶‰∏≤‰∏çÂ∫îËØ•ÂÅö‰∏ªÈîÆ Â¶ÇÊûú‰∏çÊåáÂÆö‰∏ªÈîÆÔºåinnodb‰ºö‰ΩøÁî®ÂîØ‰∏Ä‰∏îÈùûÁ©∫ÂÄºÁ¥¢Âºï‰ª£ÊõøÔºõ 12345+ Â∞ΩÈáè‰∏ç‰ΩøÁî®Â§ñÈîÆ,ÂèØ‚ÄúÂà∞Ëææ‚ÄùÂÖ∂‰ªñË°®ÔºåÊÑèÂë≥ÁùÄÈîÅË°®È´òÂπ∂ÂèëÂÆπÊòìÊ≠ªÈîÅÔºåÁî±Á®ãÂ∫è‰øùËØÅÁ∫¶Êùü+ ‰∏çÂú®Á¥¢ÂºïÂàóËøõË°åÊï∞ÊçÆËøêÁÆó ÂíåÂáΩÊï∞ËøêÁÆóÔºö‰ºöÊó†Ê≥ï‰ΩøÁî®Á¥¢ÂºïÂØºËá¥ÂÖ®Ë°®Êâ´Êèè## Á∫¶ÂÆöÁ±ªÂÜõËßÑÔºö+ ÈöîÁ¶ªÁ∫ø‰∏äÁ∫ø‰∏ã: ÊûÑÂª∫Êï∞ÊçÆÂ∫ìÁöÑÁîüÊÄÅÁéØÂ¢É,ÂºÄÂèëÊó†Á∫ø‰∏äÂ∫ìÊìç‰ΩúÊùÉÈôê ÂéüÂàôÔºöÁ∫ø‰∏äËøûÁ∫ø‰∏äÔºåÁ∫ø‰∏ãËøûÁ∫ø‰∏ã ÂÆûÊó∂Êï∞ÊçÆÁî®realÂ∫ìÔºåÊµãËØïÁî®qaÂ∫ìÔºåÊ®°ÊãüÁéØÂ¢ÉÁî®simÂ∫ìÔºåÂºÄÂèëÁî®dev 1+ Á¶ÅÊ≠¢Êú™ÁªèDBAÁ°ÆËÆ§ÁöÑÂ≠êÊü•ËØ¢ mysqlÂ≠êÊü•ËØ¢Ôºö Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰ºòÂåñËæÉÂ∑ÆÔºåÁâπÂà´ÊòØ where‰∏≠‰ΩøÁî® in idÁöÑÂ≠êÊü•ËØ¢ ‰∏ÄËà¨ÂèØÁî®joinÊîπÂÜôÔºåmysqlÂØπÂ≠êÊü•ËØ¢‰ºöÂ§ÑÁêÜ‰∏∫‰∏¥Êó∂Ë°®ÔºåÊâÄ‰ª•‰∏ÄËà¨joinÊïàÁéáÊØîÂÅöÂ≠êÊü•ËØ¢È´ò1+ Ê∞∏Ëøú‰∏çÂÜçÁ®ãÂ∫èÁ´ØÊòæÁ§∫Âä†ÈîÅ Â§ñÈÉ®ÈîÅÂØπÊï∞ÊçÆÂ∫ì‰∏çÂèØÊéß È´òÂπ∂ÂèëÊó∂ÊòØÁÅæÈöæ ÊûÅÈöæË∞ÉËØïÂíåÊéíÊü• 12345678+ Â≠óÁ¨¶ÈõÜ,Áªü‰∏ÄÂ≠óÁ¨¶ÈõÜÔºöutf8;Ê†°ÂØπËßÑÂàôÔºöutf8_general_ci+ Ê≥®ÊÑèÈÅøÂÖçÁî®‰øùÁïôÂ≠óÂëΩÂêç,eg. type+ Áªü‰∏ÄÂëΩÂêçËßÑËåÉÔºöË°®Âêç„ÄÅÂ≠óÊÆµÈáä‰πâ„ÄÅË°®Ê≥®Èáä + mysqlÂ§ßÊâπÈáèÊìç‰ΩúÊúÄÂ•ΩÊîπÂèò‰∏∫ÊâãÂä®Êèê‰∫§+ ÊâπÈáèÊìç‰ΩúÔºåÈÅøÂºÄÈ´òÂ≥∞Âå∫ÔºåÊå™Ëá≥ÂáåÊô®## sqlÁ±ªÂÜõËßÑ+ sqlËØ≠Âè•Â∞ΩÂèØËÉΩÁÆÄÂçï Â§ßsqlÁº∫ÁÇπÔºö ÂèØËÉΩ‰∏ÄÊù°Â§ßsqlÂ∞±ÊääÊï¥‰∏™Â∫ìhangÊ≠ª ‰∏ÄÊù°sqlÂè™ËÉΩÂú®‰∏Ä‰∏™cpuËøêÁÆó 5000+qpsÁöÑÈ´òÂπ∂Âèë‰∏≠Ôºå1sÂ§ßsqlÊÑèÂë≥ÁùÄÊúçÂä°Ë¶ÅÊåÇ ÂÅöÊ≥ïÔºö ÊãíÁªùÂ§ßsqlÔºåÊãÜËß£ÊàêÂ§öÊù°ÁÆÄÂçïsql Áî®‰∏äÂ§öcpu ÁÆÄÂçïsqlÁºìÂ≠òÂëΩ‰∏≠ÁéáÊõ¥È´ò ÂáèÂ∞ëÈîÅË°®Êó∂Èó¥ ÊãÜÂàÜ‰πüË¶ÅÈÄÇÈáè 1+ ‰øùÊåÅ‰∫ãÂä°ËøûÊé•Áü≠Â∞è ‰∫ãÂä°/ËøûÊé•‰ΩøÁî®ÂéüÂàôÔºöÂç≥ÂºÄÂç≥Áî®ÔºåÁî®ÂÆåÂç≥ÂÖ≥ ‰∏é‰∫ãÂä°Êó†ÂÖ≥ÁöÑÊìç‰ΩúÊîæÂú®‰∫ãÂä°Â§ñÈù¢ÔºåÂáèÂ∞ëÈîÅËµÑÊ∫êÂç†Áî® Âú®‰∏çÁ†¥Âùè‰∏ÄËá¥ÊÄßÂâçÊèê‰∏ãÔºå‰ΩøÁî®Â§ö‰∏™Áü≠‰∫ãÂä°‰ª£ÊõøÈïø‰∫ãÂä° 1+ Â∞ΩÂèØËÉΩÈÅøÂÖç‰ΩøÁî®SP/TRIG/FUNC Â∞ΩÂèØËÉΩÂ∞ëÁî®Â≠òÂÇ®ËøáÁ®ã Â∞ΩÈáèÂáèÂ∞ë‰ΩøÁî®Ëß¶ÂèëÂô® ÂáèÂ∞ë‰ΩøÁî®MYSQLÂáΩÊï∞ÂØπÁªìÊûúËøõË°åÂ§ÑÁêÜ,Áî±ÂÆ¢Êà∑Á´ØÁ®ãÂ∫èË¥üË¥£1+ Â∞ΩÈáè‰∏çË¶Åselect *ÔºåÂè™ÂèñÈúÄË¶ÅÁöÑÂàó Êõ¥Â∞ëÁöÑio ÂèØËÉΩÂà©Áî®Ë¶ÜÁõñÁ¥¢ÂºïÂèñÂÄº Êõ¥Â§öÊ∂àËÄócpu„ÄÅÂÜÖÂ≠ò„ÄÅio„ÄÅÁΩëÁªúÂ∏¶ÂÆΩ 1+ ORÊîπÂÜô‰∏∫IN() orÊïàÁéá o(n)ÔºåinÊïàÁéá o(log n)ÔºåÂΩìnÂæàÂ§ßÊó∂Ôºåor‰ºöÂæàÊÖ¢ Ê≥®ÊÑèÊéßÂà∂inÁöÑ‰∏™Êï∞ÔºåÂª∫ËÆÆÂ∞è‰∫é200‰∏™„ÄÇ egÔºö Â§ßÂÆ¢Êà∑Á≥ªÁªüÁöÑÊÖ¢sql1+ ORÊîπÂÜô‰∏∫UNION OR‰πüÂèØ‰ª•‰ΩøÁî®Âà∞ËÅîÂêàÁ¥¢Âºï ‰ΩÜmysqlÂØπ‰∫éorÂæàÂ§öÊó∂ÂÄôÂπ∂‰∏ç‰ºö‰ºòÂåñ‰∏∫‰∏§Ê¨°Á¥¢ÂºïÊàñËÄÖÂêàÂπ∂Á¥¢ÂºïÔºåÊâÄ‰ª•orÊúÄÂ•ΩÂÜôÂÅö‰∏§Êù°sql ÂÅöunion all Áûé‰∏æ‰∏™‰æãÂ≠êÔºåÁúã‰∏ãunionÂÜôÊ≥ïÔºåÂÖ∂ÂÆû‰πüËµ∞ÂêàÂπ∂Á¥¢ÂºïÔºöselect id from t1 where name = ‚ÄòÂ©∑ÂÆù‚Äô or ucid = ‚Äò131‚Äô;=&gt;select id from t1 where name = ‚ÄòÂ©∑ÂÆù‚Äôunionselect id from t1 where ucid = ‚Äò131‚Äô;123456+ ÈÅøÂÖçË¥üÂêëÊü•ËØ¢Âíå%ÂâçÁºÄÊ®°Á≥äÊü•ËØ¢:‰ΩøÁî®‰∏ç‰∫ÜÁ¥¢Âºï,ÂØºËá¥ÂÖ®Ë°®Êâ´Êèè &gt; not, !=, &lt;&gt;, !&gt; , !&lt;, &quot;not exists&quot;, &quot;not in&quot;, &quot;not like&quot;+ ÊÖéÁî®count(*) ‰∏æ‰æãÔºöcount(col) = count(1) = count(0) = count(100) != count(col)1+ limitÈ´òÊïàÂàÜÈ°µ,limitË∂äÂ§ßÔºåÊïàÁéáË∂ä‰Ωé ÂÅèÁßªÈáèË∂äÂ§ßÂàôË∂äÊÖ¢ ÂΩìÊòØidÊó∂ÔºåÈôçÂÅèÁßªÈáèÁßªÂà∞ whereÊù°‰ª∂‰∏≠ eg.select id from t limit 10000, 10; =&gt;select id from t where id &gt; 10000 limit 10;1+ Â∞ëÁî®ËøûÊé•join ÂáèÂ∞ëÁ°¨Áõò‰∏¥Êó∂Ë°®ÁîüÊàêÔºåÁâπÂà´ÊòØÊúâTEXT/BLOBÊó∂ mysqlÂú®join‰∏≠ÂØπ‚Äúorder by‚ÄùÔºå ‚Äúgroup by‚Äù‰ºòÂåñËæÉÂº± join‰∏≠ÁöÑÊéíÂ∫èÂàÜÁªÑÂá†‰πéÈÉΩ‰ºö‰ΩøÁî®fille sort Âíå‰∏¥Êó∂Ë°® 1234+ Ëã•Êó†ÈúÄÂØπÁªìÊûúÂéªÈáçÔºåÁî®union allÔºåËÄåÈùûunionÔºåunionÊúâÂéªÈáçÂºÄÈîÄ+ group byÊó†ÊéíÂ∫èË¶ÅÊ±ÇÊó∂‰ΩøÁî®Ëá™Âä®ÊéíÂ∫è + ÂêåÊï∞ÊçÆÁ±ªÂûãÁöÑÂàóÂÄºÊØîËæÉ+ ‰ΩøÁî®load dataÂØºÊï∞ÊçÆ ÊâπÈáèÊï∞ÊçÆÂùóÂØºÂÖ•,load dataÊØîinsertÂø´Á∫¶20ÂÄç ÊàêÊâπË£ÖËΩΩÊØîÂçïË°åË£ÖËΩΩÊõ¥Âø´Ôºå‰∏çÈúÄË¶ÅÊØèÊ¨°Âà∑Êñ∞ÁºìÂ≠ò Êó†Á¥¢ÂºïÊó∂Ë£ÖËΩΩÊØîÁ¥¢ÂºïË£ÖËΩΩÊõ¥Âø´ insert valuesÔºåvaluesÔºåvalues ÂáèÂ∞ëÁ¥¢ÂºïÂà∑Êñ∞ Â∞ΩÈáè‰∏çÁî®insert ‚Ä¶ select, ‰ºöÂª∂Ëøü„ÄÅÂêåÊ≠•Âá∫Èîô1+ ÊâìÊï£ÊâπÈáèÊõ¥Êñ∞ Â§ßÊâπÈáèÊõ¥Êñ∞ÂáåÊô®Êìç‰ΩúÔºåÈÅøÂºÄÈ´òÂ≥∞ ÂáåÊô®‰∏çÈôêÂà∂ÔºåÁôΩÂ§©‰∏äÈôêÈªòËÆ§‰∏∫100Êù°/Áßí 123456789+ know every sql # ‰ºòÂåñÂª∫ËÆÆ## 1.ÊâπÈáèÊèíÂÖ•‰ª£ÊõøÂæ™ÁéØÂçïÊù°ÊèíÂÖ•## 2.ÂΩìÂè™Ë¶Å‰∏ÄË°åÊï∞ÊçÆÊó∂‰ΩøÁî® LIMIT 1ÂΩì‰Ω†Êü•ËØ¢Ë°®ÁöÑÊúâ‰∫õÊó∂ÂÄôÔºå‰Ω†Â∑≤ÁªèÁü•ÈÅìÁªìÊûúÂè™‰ºöÊúâ‰∏ÄÊù°ÁªìÊûúÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂä†‰∏ä LIMIT 1 ÔºåMySQLÊï∞ÊçÆÂ∫ìÂºïÊìé‰ºöÂú®ÊâæÂà∞‰∏ÄÊù°Êï∞ÊçÆÂêéÂÅúÊ≠¢ÊêúÁ¥¢ÔºåËÄå‰∏çÊòØÁªßÁª≠ÂæÄÂêéÊü•‰∏ã‰∏ÄÊù°Á¨¶ÂêàËÆ∞ÂΩïÁöÑÊï∞ÊçÆ„ÄÇ## 3.Âú®JoinË°®ÁöÑÊó∂ÂÄô‰ΩøÁî®Áõ∏ÂΩìÁ±ªÂûãÁöÑ‰æãÔºåÂπ∂Â∞ÜÂÖ∂Á¥¢ÂºïÂ¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÊúâÂæàÂ§ö JOIN Êü•ËØ¢Ôºå‰Ω†Â∫îËØ•Á°ÆËÆ§‰∏§‰∏™Ë°®‰∏≠JoinÁöÑÂ≠óÊÆµÊòØË¢´Âª∫ËøáÁ¥¢ÂºïÁöÑ„ÄÇËøôÊ†∑ÔºåMySQLÂÜÖÈÉ®‰ºöÂêØÂä®‰∏∫‰Ω†‰ºòÂåñJoinÁöÑSQLËØ≠Âè•ÁöÑÊú∫Âà∂„ÄÇËÄå‰∏îÔºåËøô‰∫õË¢´Áî®Êù•JoinÁöÑÂ≠óÊÆµÔºåÂ∫îËØ•ÊòØÁõ∏ÂêåÁöÑÁ±ªÂûãÁöÑ„ÄÇ DECIMALÂíåINTÂ≠óÊÆµJoinÂú®‰∏ÄËµ∑ÔºåMySQLÂ∞±Êó†Ê≥ï‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÁ¥¢Âºï ÂØπ‰∫éÈÇ£‰∫õSTRINGÁ±ªÂûãÔºåËøòÈúÄË¶ÅÊúâÁõ∏ÂêåÁöÑÂ≠óÁ¨¶ÈõÜÊâçË°å„ÄÇ12345678## 4.ÂçÉ‰∏á‰∏çË¶Å ORDER BY RAND()MySQL‰ºö‰∏çÂæó‰∏çÂéªÊâßË°åRAND()ÂáΩÊï∞ÔºàÂæàËÄóCPUÊó∂Èó¥ÔºâÔºåËÄå‰∏îËøôÊòØ‰∏∫‰∫ÜÊØè‰∏ÄË°åËÆ∞ÂΩïÂéªËÆ∞Ë°åÔºåÁÑ∂ÂêéÂÜçÂØπÂÖ∂ÊéíÂ∫è„ÄÇÂ∞±ÁÆóÊòØÁî®‰∫ÜLimit 1‰πüÊó†Êµé‰∫é‰∫ãÔºàÂõ†‰∏∫Ë¶ÅÊéíÂ∫èÔºâ## 5.Prepared Statements&gt; Prepared Statements ÂèØ‰ª•Ê£ÄÊü•‰∏Ä‰∫õ‰Ω†ÁªëÂÆöÂ•ΩÁöÑÂèòÈáèÔºåËøôÊ†∑ÂèØ‰ª•‰øùÊä§‰Ω†ÁöÑÁ®ãÂ∫è‰∏ç‰ºöÂèóÂà∞‚ÄúSQLÊ≥®ÂÖ•Âºè‚ÄùÊîªÂáª„ÄÇ## 6.ÂûÇÁõ¥ÂàÜÂâ≤&gt; ‚ÄúÂûÇÁõ¥ÂàÜÂâ≤‚ÄùÊòØ‰∏ÄÁßçÊääÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®ÊåâÂàóÂèòÊàêÂá†Âº†Ë°®ÁöÑÊñπÊ≥ïÔºåËøôÊ†∑ÂèØ‰ª•Èôç‰ΩéË°®ÁöÑÂ§çÊùÇÂ∫¶ÂíåÂ≠óÊÆµÁöÑÊï∞ÁõÆÔºå‰ªéËÄåËææÂà∞‰ºòÂåñÁöÑÁõÆÁöÑ eg.Â§ßÂÆ¢Êà∑Á≥ªÁªüÁöÑÂÆ¢Êà∑Â±ûÊÄßÊãÜËß£Ôºö‰∏ªÂ±ûÊÄß+ÈôÑÂä†Â±ûÊÄß123## 7.ÊãÜÂàÜÂ§ßÁöÑ DELETE Êàñ INSERT ËØ≠Âè•È¶ñÂÖàÔºåÊàë‰ª¨ÁöÑÊúçÂä°Âô®Âπ∂‰∏ç‰ºöÊúâÂ§™Â§öÁöÑÂ≠êËøõÁ®ãÔºåÁ∫øÁ®ãÂíåÊï∞ÊçÆÂ∫ìÈìæÊé•ÔºåÂõ†‰∏∫ËøôÊòØÊûÅÂ§ßÁöÑÂç†ÊúçÂä°Âô®ËµÑÊ∫êÁöÑ‰∫ãÊÉÖÔºåÂ∞§ÂÖ∂ÊòØÂÜÖÂ≠òÔºõÂÖ∂Ê¨°ÔºåDELETE Êàñ INSERTÊòØ‰ºöÈîÅË°®ÁöÑÔºåË°®‰∏ÄÈîÅ‰Ωè‰∫ÜÔºåÂà´ÁöÑÊìç‰ΩúÈÉΩËøõ‰∏ç‰∫ÜÔºõÁªìÊûúÔºåÂ¶ÇÊûúË°®ÈîÅ‰∏ä‰∏ÄÊÆµÊó∂Èó¥ÔºåÊØîÂ¶Ç30ÁßíÈíüÔºåÈÇ£‰πàÂØπ‰∫é‰∏Ä‰∏™ÊúâÂæàÈ´òËÆøÈóÆÈáèÁöÑÁ´ôÁÇπÊù•ËØ¥ÔºåËøô30ÁßíÊâÄÁßØÁ¥ØÁöÑËÆøÈóÆËøõÁ®ã/Á∫øÁ®ãÔºåÊï∞ÊçÆÂ∫ìÈìæÊé•ÔºåÊâìÂºÄÁöÑÊñá‰ª∂Êï∞ÔºåÂèØËÉΩ‰∏ç‰ªÖ‰ªÖ‰ºöËÆ©WEBÊúçÂä°CrashÔºåËøòÂèØËÉΩ‰ºöËÆ©Êï¥Âè∞ÊúçÂä°Âô®È©¨‰∏äÊåÇÊéâÔºõÊâÄ‰ª•ÔºåÈúÄË¶ÅÂØπ‰∏Ä‰∏™Â§ßÁöÑÂ§ÑÁêÜÔºåËøõË°åÊãÜÂàÜÔºå eg. ‰ΩøÁî®limit + sleep while (1) { //ÊØèÊ¨°Âè™ÂÅö1000Êù° mysql_query(‚ÄúDELETE FROM logs WHERE log_date &lt;= ‚Äò2017-11-01‚Äô LIMIT 1000‚Äù); if (mysql_affected_rows() == 0) { break; } // ÊØèÊ¨°ÈÉΩË¶Å‰ºëÊÅØ‰∏Ä‰ºöÂÑø usleep(50000);}``` 8. Ë∂äÂ∞èÁöÑÂàó‰ºöË∂äÂø´ÂØπ‰∫éÂ§ßÂ§öÊï∞ÁöÑÊï∞ÊçÆÂ∫ìÂºïÊìéÊù•ËØ¥ÔºåÁ°¨ÁõòÊìç‰ΩúÂèØËÉΩÊòØÊúÄÈáçÂ§ßÁöÑÁì∂È¢à„ÄÇÊâÄ‰ª•ÔºåÊää‰Ω†ÁöÑÊï∞ÊçÆÂèòÂæóÁ¥ßÂáë‰ºöÂØπËøôÁßçÊÉÖÂÜµÈùûÂ∏∏ÊúâÂ∏ÆÂä©ÔºåÂõ†‰∏∫ËøôÂáèÂ∞ë‰∫ÜÂØπÁ°¨ÁõòÁöÑËÆøÈóÆ„ÄÇ 9.Â∞èÂøÉ‚ÄúÊ∞∏‰πÖÈìæÊé•‚Äù‚ÄúÊ∞∏‰πÖÈìæÊé•‚ÄùÁöÑÁõÆÁöÑÊòØÁî®Êù•ÂáèÂ∞ëÈáçÊñ∞ÂàõÂª∫MySQLÈìæÊé•ÁöÑÊ¨°Êï∞,Âú®ÁêÜËÆ∫‰∏äÊù•ËØ¥ÔºåËøôÂê¨Ëµ∑Êù•ÈùûÂ∏∏ÁöÑ‰∏çÈîô„ÄÇ‰ΩÜÊòØ‰ªé‰∏™‰∫∫ÁªèÈ™åÔºà‰πüÊòØÂ§ßÂ§öÊï∞‰∫∫ÁöÑÔºâ‰∏äÊù•ËØ¥ÔºåËøô‰∏™ÂäüËÉΩÂà∂ÈÄ†Âá∫Êù•ÁöÑÈ∫ªÁÉ¶‰∫ãÊõ¥Â§ö„ÄÇÂõ†‰∏∫Ôºå‰Ω†Âè™ÊúâÊúâÈôêÁöÑÈìæÊé•Êï∞ÔºåÂÜÖÂ≠òÈóÆÈ¢òÔºåÊñá‰ª∂Âè•ÊüÑÊï∞Á≠âÁ≠â„ÄÇ]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitÊãâÂèñËøúÁ®ãÂàÜÊîØÂà∞Êú¨Âú∞]]></title>
    <url>%2F2017%2F11%2F28%2F%E6%9D%82%E8%B0%88%2Fgit%E6%8B%89%E5%8F%96%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%88%B0%E6%9C%AC%E5%9C%B0%2F</url>
    <content type="text"><![CDATA[Êñ∞Âª∫Êú¨Âú∞ÂàÜÊîØ 1git checkout -b localName pullËøúÁ®ã‰ª£Á†Å 1git pull origin remoteName fetch 1git fetch origin branchname:branchname Ëé∑ÂèñËøúÁ®ãÂàÜÊîØremoteName Âà∞Êú¨Âú∞Êñ∞ÂàÜÊîØlocalNameÔºåÂπ∂Ë∑≥Âà∞localNameÂàÜÊîØ 1git checkout origin/remoteName -b localName]]></content>
      <categories>
        <category>ÁâàÊú¨ÁÆ°ÁêÜ</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx 403 Forbidden]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2Fnginx-403-Forbidden%2F</url>
    <content type="text"><![CDATA[nginx 403 Forbidden]]></content>
      <categories>
        <category>ÈóÆÈ¢òÊéíÊü•</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[lnmpËÆøÈóÆÈÄüÂ∫¶ÂèòÊÖ¢ÊéíÊü•ÊñπÊ≥ï]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2Flnmp%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6%E5%8F%98%E6%85%A2%E6%8E%92%E6%9F%A5%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[lnmpËÆøÈóÆÈÄüÂ∫¶ÂèòÊÖ¢ÊéíÊü•ÊñπÊ≥ï]]></content>
      <categories>
        <category>ÈóÆÈ¢òÊéíÊü•</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxÊó•Âøó]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2Fnginx%E6%97%A5%E5%BF%97%2F</url>
    <content type="text"><![CDATA[nginx Êó•Âøó‰∏ªË¶ÅÊúâ‰∏§Êù°Êåá‰ª§Ôºö log_formatÔºöÁî®Êù•ËÆæÁΩÆÊó•ÂøóÊ†ºÂºèÔºõ access_logÔºöÁî®Êù•ÊåáÂÆöÊó•ÂøóÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ„ÄÅÊ†ºÂºèÔºàÊääÂÆö‰πâÁöÑlog_format Ë∑üÂú®ÂêéÈù¢ÔºâÂíåÁºìÂ≠òÂ§ßÂ∞èÔºõÂ¶ÇÊûú‰∏çÊÉ≥ÂêØÁî®Êó•ÂøóÂàôaccess_log off ; log_format Êó•ÂøóÊ†ºÂºèËØ≠Ê≥ïÊ†ºÂºèÔºöËØ•Êåá‰ª§Áî®Êù•ËÆæÁΩÆÊó•ÂøóËÆ∞ÂΩïÁöÑÊ†ºÂºè„ÄÇ 12log_format name format [format ...] name : ÁªôÂÆö‰πâÁöÑÊ†ºÂºèËµ∑ÁöÑÂêçÁß∞ÔºåÂ∫îËØ•ÊòØÂÖ®Â±ÄÂîØ‰∏ÄÁöÑ ÈªòËÆ§Êó•ÂøóÊ†ºÂºèÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºånginxÁöÑÈªòËÆ§Êó•ÂøóÊ†ºÂºèÂ¶Ç‰∏ã(‰∏çÂêåÁâàÊú¨ÂèØËÉΩÁï•Êúâ‰∏çÂêå)Ôºö 123log_format combined &apos;$remote_addr - $remote_user [$time_local] &apos; &apos;&quot;$request&quot; $status $body_bytes_sent &apos; &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot;&apos;; Êó•ÂøóÊ†ºÂºè‰∏æ‰æãÔºö 1192.168.161.1 - - [25/Oct/2016:05:39:45 +0800] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.161.126/&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36&quot; Â∏∏ËßÅÂÜÖÁΩÆÂèòÈáè Êó•ÂøóÂàÜÁ±ªaccess_logËØ•Êåá‰ª§Áî®Êù•ÊåáÂÆöËÆøÈóÆÊó•ÂøóÁöÑË∑ØÂæÑÂèäÊ†ºÂºèÁ≠â‰ø°ÊÅØ„ÄÇ ËØ≠Ê≥ïÊ†ºÂºè1access_log path [log_format_name [buffer=buffer_size | off]] Á§∫‰æãÔºö 1234log_format reverseRealIpFormat1 &apos;$remote_addr - $remote_user [$time_local] &apos; &apos;&quot;$request&quot; $status $body_bytes_sent &apos; &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot;&apos;;access_log /var/log/nginx/my-access.log reverseRealIpFormat1 buffer=8k; Âú®access_log‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂèòÈáèÔºå‰ΩÜÊòØ‰∏çËÉΩ‰∏ébufferÂêåÊó∂ÂêØÁî®,Âê¶Âàôbuffer‰∏çËÉΩÂêØÁî® 121. access_log /var/log/nginx/$server_name.log reverseRealIpFormat1;2. access_log /var/log/nginx/$server_name.log reverseRealIpFormat1 buffer=8k; error_logerror_logÊòØËÆæÁΩÆËÆ∞ÂΩïÈîôËØØÊó•ÂøóÁöÑÊåá‰ª§„ÄÇ ËØ•Êåá‰ª§Âú® http, stream, server Âíå location ÊÆµÈÉΩÂèØ‰ª•Ë¢´ÊåáÂÆöÔºåÂèØ‰ª•Ë¶ÜÁõñÊõ¥Â§ñÈù¢ÁöÑÊÆµÁöÑËÆæÁΩÆ„ÄÇ 1error_log /var/log/nginx/error.log warn; open_log_file_cacheÊØèÊ¨°ËÆ∞ÂΩïÊó•ÂøóÈÉΩÊòØÂ∞ÜÊó•ÂøóÊñá‰ª∂ÊâìÂºÄ-&gt;ÂÜôÂÖ•-&gt;ÂÖ≥Èó≠,Â§™Ê∂àËÄóIO. open_log_file_cache ÂèØ‰ª•ËÆæÁΩÆË∑ØÂæÑ‰∏≠Âê´ÊúâÂèòÈáèÁöÑÊó•ÂøóÈÖçÁΩÆ‰∏≠Êó•ÂøóÊñá‰ª∂ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÁºìÂ≠ò„ÄÇ 12345678open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time] | off;ÂèÇÊï∞Ê≥®ÈáäÂ¶Ç‰∏ãÔºömax:ËÆæÁΩÆÁºìÂ≠ò‰∏≠ÁöÑÊúÄÂ§ßÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÔºåÂ¶ÇÊûúÁºìÂ≠òË¢´Âç†Êª°ÔºåÈááÁî®LRUÁÆóÊ≥ïÂ∞ÜÊèèËø∞Á¨¶ÂÖ≥Èó≠„ÄÇinactive:ËÆæÁΩÆÂ≠òÊ¥ªÊó∂Èó¥ÔºåÈªòËÆ§ÊòØ10smin_uses:ËÆæÁΩÆÂú®inactiveÊó∂Èó¥ÊÆµÂÜÖÔºåÊó•ÂøóÊñá‰ª∂ÊúÄÂ∞ë‰ΩøÁî®Â§öÂ∞ëÊ¨°ÂêéÔºåËØ•Êó•ÂøóÊñá‰ª∂ÊèèËø∞Á¨¶ËÆ∞ÂÖ•ÁºìÂ≠ò‰∏≠ÔºåÈªòËÆ§ÊòØ1Ê¨°valid:ËÆæÁΩÆÊ£ÄÊü•È¢ëÁéáÔºåÈªòËÆ§60s ‰æãÂ¶Ç: 1open_log_file_cache max=655350 inactive=20s; ËÆæÁΩÆÂà∑ÁõòÁ≠ñÁï•buffer Êª° 32k ÊâçÂà∑ÁõòÔºõÂÅáÂ¶Ç buffer ‰∏çÊª° 5s ÈíüÂº∫Âà∂Âà∑Áõò 1access_log /data/logs/nginx-access.log buffer=32k flush=5s; ‰ΩøÁî®‰∏æ‰æã‰∏ÄËà¨log_formatÂú®ÂÖ®Â±ÄËÆæÁΩÆÔºåÂèØ‰ª•ËÆæÁΩÆÂ§ö‰∏™„ÄÇaccess_log ÂèØ‰ª•Âú®ÂÖ®Â±ÄËÆæÁΩÆÔºå‰ΩÜÂæÄÂæÄÊòØÂÆö‰πâÂú®ËôöÊãü‰∏ªÊú∫ÔºàserverÔºâ‰∏≠ÁöÑlocation‰∏≠ 123456789101112131415161718192021http &#123; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;&quot;$status&quot; $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot; &apos; &apos;&quot;$gzip_ratio&quot; $request_time $bytes_sent $request_length&apos;; log_format srcache_log &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;&quot;$status&quot; $body_bytes_sent $request_time $bytes_sent $request_length &apos; &apos;[$upstream_response_time] [$srcache_fetch_status] [$srcache_store_status] [$srcache_expire]&apos;; open_log_file_cache max=1000 inactive=60s; server &#123; server_name ~^(www\.)?(.+)$; access_log logs/$2-access.log main; error_log logs/$2-error.log; location /srcache &#123; access_log logs/access-srcache.log srcache_log; &#125; &#125;&#125; Êó•ÂøóÂàÜÊûêÔºöÈÄöËøáÂØπÊó•ÂøóÊ†ºÂºèÁöÑÂÆö‰πâÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®Â∏∏ËßÅÁöÑ Linux ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ËøõË°åÂàÜÊûê‰∫ÜÔºö Êü•ÊâæËÆøÈóÆÈ¢ëÁéáÊúÄÈ´òÁöÑ URL ÂíåÊ¨°Êï∞Ôºö1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;print $10&#125;‚Äô | sort | uniq -c Êü•ÊâæÂΩìÂâçÊó•ÂøóÊñá‰ª∂ 500 ÈîôËØØÁöÑËÆøÈóÆÔºö1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($5 == 500) print $0&#125;‚Äô Êü•ÊâæÂΩìÂâçÊó•ÂøóÊñá‰ª∂ 500 ÈîôËØØÁöÑÊï∞ÈáèÔºö1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($5 == 500) print $0&#125;‚Äô | wc -l Êü•ÊâæÊüê‰∏ÄÂàÜÈíüÂÜÖ 500 ÈîôËØØËÆøÈóÆÁöÑÊï∞Èáè:1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($5 == 500) print $0&#125;‚Äô | grep ‚Äô09:00‚Äô | wc-l Êü•ÊâæËÄóÊó∂Ë∂ÖËøá 1s ÁöÑÊÖ¢ËØ∑Ê±ÇÔºö1tail -f access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($6&gt;1) print $0&#125;‚Äô ÂÅáÂ¶ÇÂè™ÊÉ≥Êü•ÁúãÊüê‰∫õ‰ΩçÔºö 1tail -f access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($6&gt;1) print $3‚Ä≥|‚Äù$4&#125;‚Äô Êü•Êâæ 502 ÈîôËØØÊúÄÂ§öÁöÑ URLÔºö1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($5==502) print $11&#125;‚Äô | sort | uniq -c Êü•Êâæ 200 Á©∫ÁôΩÈ°µ1cat access.log | awk -F ‚Äò^A‚Äô ‚Äò&#123;if($5==200 &amp;&amp; $8 &lt; 100) print $3‚Ä≥|‚Äù$4‚Ä≥|‚Äù$11‚Ä≥|‚Äù$6&#125;‚Äô ÂàáÂâ≤Êó•ÂøóNginx ÁöÑÊó•ÂøóÈÉΩÊòØÂÜôÂú®‰∏Ä‰∏™Êñá‰ª∂ÂΩì‰∏≠ÁöÑÔºå‰∏ç‰ºöËá™Âä®Âú∞ËøõË°åÂàáÂâ≤ÔºåÂ¶ÇÊûúËÆøÈóÆÈáèÂæàÂ§ßÁöÑËØùÔºåÂ∞ÜÂØºËá¥Êó•ÂøóÊñá‰ª∂ÂÆπÈáèÈùûÂ∏∏Â§ßÔºå‰∏ç‰æø‰∫éÁÆ°ÁêÜÂíåÈÄ†ÊàêNginx Êó•ÂøóÂÜôÂÖ•ÊïàÁéá‰Ωé‰∏ãÁ≠âÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÔºåÂæÄÂæÄÈúÄË¶ÅË¶ÅÂØπaccess_log„ÄÅerror_logÊó•ÂøóËøõË°åÂàáÂâ≤„ÄÇ ÂàáÂâ≤Êó•Âøó‰∏ÄËà¨Âà©Áî®USR1‰ø°Âè∑ËÆ©nginx‰∫ßÁîüÊñ∞ÁöÑÊó•Âøó„ÄÇÂÆû‰æãÔºö 12345678910111213141516#!/bin/bashlogdir=&quot;/data/logs/nginx&quot;pid=`cat $logdir/nginx.pid`DATE=`date -d &quot;1 hours ago&quot; +%Y%m%d%H`DATE_OLD=`date -d &quot;7 days ago&quot; +%Y%m%d`for i in `ls $logdir/*access.log`; do mv $i $i.$DATEdonefor i in `ls $logdir/*error.log`; do mv $i $i.$DATEdonekill -s USR1 $pidrm -v $logdir&quot;/access.log.&quot;$DATE_OLD*rm -v $logdir&quot;/error.log.&quot;$DATE_OLD* 1„ÄÅÂàÜÊûêÔºö Â∞Ü‰∏äÈù¢ÁöÑËÑöÊú¨ÊîæÂà∞crontab‰∏≠ÔºåÊØèÂ∞èÊó∂ÊâßË°å‰∏ÄÊ¨°Ôºà0 ÔºâÔºåËøôÊ†∑ÊØèÂ∞èÊó∂‰ºöÊääÂΩìÂâçÊó•ÂøóÈáçÂëΩÂêçÊàê‰∏Ä‰∏™Êñ∞Êñá‰ª∂ÔºõÁÑ∂ÂêéÂèëÈÄÅUSR1Ëøô‰∏™‰ø°Âè∑ËÆ©Nginx ÈáçÊñ∞ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÊó•Âøó„ÄÇÔºàÁõ∏ÂΩì‰∫éÂ§á‰ªΩÊó•ÂøóÔºâÂ∞ÜÂâç7Â§©ÁöÑÊó•ÂøóÂà†Èô§Ôºõ2„ÄÅËØ¥ÊòéÔºöÂú®Ê≤°ÊúâÊâßË°åkill -USR1 $pid‰πãÂâçÔºåÂç≥‰æøÂ∑≤ÁªèÂØπÊñá‰ª∂ÊâßË°å‰∫ÜmvÂëΩ‰ª§ËÄåÊîπÂèò‰∫ÜÊñá‰ª∂ÂêçÁß∞ÔºånginxËøòÊòØ‰ºöÂêëÊñ∞ÂëΩÂêçÁöÑÊñá‰ª∂‚Äù*access.log.2016032623‚ÄùÁÖßÂ∏∏ÂÜôÂÖ•Êó•ÂøóÊï∞ÊçÆÁöÑ„ÄÇÂéüÂõ†Âú®‰∫éÔºölinuxÁ≥ªÁªü‰∏≠ÔºåÂÜÖÊ†∏ÊòØÊ†πÊçÆÊñá‰ª∂ÊèèËø∞Á¨¶Êù•ÊâæÊñá‰ª∂ÁöÑ„ÄÇ 3„ÄÅlogrotatesÔºö‰ΩøÁî®Á≥ªÁªüËá™Â∏¶ÁöÑlogrotatesÔºå‰πüÂèØ‰ª•ÂÆûÁé∞nginxÁöÑÊó•ÂøóÂàÜÂâ≤ÔºåÊü•ÁúãÂÖ∂bashÊ∫êÁ†ÅÔºåÂèëÁé∞‰πüÊòØÂèëÈÄÅUSR1Ëøô‰∏™‰ø°Âè∑„ÄÇ ‰ΩøÁî®Êó•ÂøóÊéíÊü•ÈóÆÈ¢ò‰∏æ‰æãÁ£ÅÁõòÊª°ÈóÆÈ¢òÊèèËø∞ÊüêÂë®Êó•Êôö8ÁÇπÂ§öÔºåÊî∂Âà∞Êä•Ë≠¶Áü≠‰ø°ÔºåÊàë‰ª¨‰∏Ä‰∏™pvÁªüËÆ°ÊúçÂä°ÁöÑÊâìÁÇπÁªüËÆ°ÁªìÊûúÁ™ÅÁÑ∂Â§ßÂπÖÂáèÂ∞ë„ÄÇËµ∂Á¥ßÁôªVPN‰∏äÂÜÖÁΩëÔºåÂèëÁé∞pvÁªüËÆ°Êõ≤Á∫øÔºåÂú®ÊïÖÈöúÂèëÁîüÂêéÔºåÂØπÊØî‰∏äÂë®Êó•‰∏ãÈôçÂà∞1/3Â∑¶Âè≥„ÄÇ Ëß£ÂÜ≥Ê≠•È™§ Ê£ÄÊü•‰∫ÜÁªüËÆ°ËÆ°ÁÆóÁ®ãÂ∫èÔºåÊú™ÂèëÁé∞ÂºÇÂ∏∏„ÄÇ Ê£ÄÊü•‰∫Ü‰∏Ä‰∏ãÊú∫Âô®ÂàóË°®ÂèëÁé∞Êúâ‰∏ÄÂè∞Áîµ‰ø°ÁöÑÊú∫Âô®Ôºàds1ÔºâÊåÇ‰∫ÜÔºålvs‰∏äÂ∑≤ÁªèËá™Âä®‰∏ãÁ∫øÔºõÂè¶‰∏ÄÂè∞Áîµ‰ø°Êú∫Âô®Ôºàds2ÔºâCPUÁ©∫Èó≤Áéá‰ªé81%‰∏ãÈôçÂà∞42% ÂÖàÂ∞ÜËøô‰∫õÁ®ãÂ∫è killÊéâÔºåÂπ∂Âú® ËÅîÈÄöÊú∫ÊàøÁöÑ ls2 Êú∫Âô®‰∏äÂêØÂä®Ëµ∑Êù•Êìç‰ΩúÂÆåÊØïÂêéÔºåds2ÁöÑCPUÁ©∫Èó≤ÁéáÂõûÂçáÂà∞70%Â§öÔºå‰ΩÜpvÁªüËÆ°ÁªìÊûú‰æùÁÑ∂Áª¥ÊåÅÂú®1/3Â∑¶Âè≥ Êü•Áúãds2‰∏äÁöÑÊâìÁÇπÊó•Âøó(nginxÁöÑaccess log)ÔºåÂèëÁé∞Á´üÁÑ∂Ê≤°ÊúâÊñ∞Êó•ÂøóÂÜôÂÖ•„ÄÇÂÜçÊü•ÁúãnginxÁöÑÈîôËØØÊó•ÂøóÔºåÊúâÂ¶Ç‰∏ãÂ≠óÊ†∑Ôºö 1[alert] 19963#0: *17264042335 write() to &quot;/usr/local/nginx/logs/xxx.log&quot; failed (28: No space left on device) while logging request ÂÜçÁî®df -lhÂëΩ‰ª§Êü•Áúã,ÂèëÁé∞Á£ÅÁõòÂ∑≤Êª° 123Filesystem Size Used Avail Use% Mounted on/dev/xvde1 493G 493G 0G 100% /tmpfs 2.0G 0 2.0G 0% /dev/shm Ê∏ÖÁêÜ‰∏ÄÈÉ®ÂàÜÊó†Áî®Êó•ÂøóÔºåÈáçÂêØnginxÔºåÂÜçËßÇÂØüÔºåÁªüËÆ°ÁªìÊûúÁªà‰∫éÂõûÂçá‰∫Ü„ÄÇ ÈóÆÈ¢òÂéüÂõ†ÂéüÊù•Áîµ‰ø°Êú∫ÊàøÁöÑds1Êú∫Âô®ÊåÇ‰∫Ü‰πãÂêéÔºåÊâÄÊúâÁîµ‰ø°ÁöÑÊµÅÈáèÈÉΩÂà∞ds2Ëøô‰∏ÄÂè∞Êú∫Âô®‰∏ä‰∫ÜÔºåÂØºËá¥ÊâìÁÇπÊó•ÂøóÂ¢ûÈïøËøáÂø´ÔºåÂä†‰∏ä‰πãÂâçÊúâÈÉ®ÂàÜÊó†Áî®Êó•ÂøóÊú™ÂèäÊó∂Ê∏ÖÁêÜÔºåÂØºËá¥Á°¨ÁõòÊª°‰∫ÜÔºåÊâÄÊúâÁîµ‰ø°ÁΩëÁªúÊâìÁÇπËØ∑Ê±ÇÁöÑÊó•ÂøóÈÉΩÊ≤°ÊúâËÆ∞ÂΩï‰∏ãÊù•„ÄÇÊàë‰ª¨Áîµ‰ø°ÁöÑËØ∑Ê±ÇÈáèÂ§ßÁ∫¶ÊòØËÅîÈÄöÁöÑ‰∏§ÂÄçÔºåÂõ†Ê≠§ÂèçÊò†Âà∞ÁªüËÆ°ÁªìÊûú‰∏äÊòØ‰∏ãÈôçÂà∞1/3„ÄÇ ÁªìËÆ∫ËøôÊ¨°ÈóÆÈ¢òÁöÑÂá∫Áé∞Âà∞Ëß£ÂÜ≥ÔºåÂÆûÈôÖ‰∏äÁªèÂéÜ‰∫ÜËæÉÈïøÁöÑÊó∂Èó¥„ÄÇÂõûËøáÂ§¥Êù•ÊÄùËÄÉÔºåÂÖ∂ÂÆûÈóÆÈ¢òÊòØÂèØ‰ª•ÂæàÂø´ÂÆö‰ΩçËß£ÂÜ≥ÁöÑ„ÄÇËßÇÂØüÂà∞Êó•Âøó‰∏ãÈôçÂà∞1/3ÁöÑÁé∞Ë±°ÔºåÂ∞±ÂèØ‰ª•ÊÄÄÁñëÊòØÊï¥‰∏™Áîµ‰ø°ÁöÑÊó•ÂøóÊ≤°ÊúâÊî∂ÈõÜÂà∞ÔºåÊü•‰∏Ä‰∏ãÁîµ‰ø°Êú∫Âô®‰∏äÁöÑÊâìÁÇπÊó•Âøó Âíå error logÔºåÂæàÂø´ÂèØ‰ª•ÁúãÂà∞ÈóÆÈ¢ò„ÄÇÂè¶Â§ñÔºåÂá∫Áé∞Á®ãÂ∫èÊâßË°å‰∏çÂØπÂä≤ÔºåÊó•ÂøóÂÜôÂÖ•‰∏ç‰∫ÜÁ≠âÁ≠âÂ•áÊÄ™ÈóÆÈ¢òÔºåÈÉΩÂèØ‰ª•ÁúãÁúãÊòØÂê¶Á£ÅÁõòÊª°‰∫Ü„ÄÇ ÂèÇËÄÉÂçöÂÆ¢: http://www.jianshu.com/p/4fcaac8f2996 https://lanjingling.github.io/2016/03/14/nginx-access-log/ http://tabalt.net/blog/a-nginx-log-problem-investigation-record/]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginx 504ÈîôËØØÊÄªÁªì]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2FNginx%20504%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[ÂæàÂ§ö‰∫∫ÈÉΩÈÉΩÂèØËÉΩÈÅáÂà∞Ëøá 504 Gateway Time-out„ÄÇÊúâÊó∂ÂÄô‰ºöËÆ©‰∫∫‰∏ÄÂ§¥ÈõæÊ∞¥„ÄÇËß£ÂÜ≥ÊñπÊ≥ïÔºö1.ÈÄöËøáÁôæÂ∫¶ÂèØ‰ª•ÂæàÂ§ö‰∫∫ÁöÑËØ¥Ê≥ïÔºåË∞ÉÊï¥ nginxÈÖçÁΩÆÊàñËÄÖPHP-fpmÈÖçÁΩÆÔºåÈÖçÁΩÆÂ§ßÂÆ∂ÈÉΩÂèØ‰ª•ÁôæÂ∫¶ÔºåÂú®ËøôËæπÂ∞±‰∏çÂ§öËØ¥„ÄÇ‰ΩÜÊòØÂæàÂ§öÈÉΩÂ∞ùËØï‰∫ÜÊ≤°Êúâ‰ªÄ‰πàËΩØÁî®„ÄÇ2.Â∞ùËØïËøá‰∏äÈù¢ÁöÑÊñπÊ≥ïËøòÊòØÂõûÂà∞Êú¨Ë¥®‰∏äÊòØ‰∏çÊòØÊï¥Á´ôÈÉΩÊòØ504.Â¶ÇÊûú‰∏çÊòØÔºåÊàëÂª∫ËÆÆ‰Ω†ÊâìÂºÄphp-fpm ÊÖ¢Êó•ÂøóÊù•Êü•ÁúãÂØπÂ∫îÁöÑÈ°µÈù¢ËØ∑Ê±Ç‰∏éÂìçÂ∫îÊÖ¢ÊòØÁî±Âì™‰∏™ÊñπÊ≥ïÊàñËÄÖÊìç‰ΩúÈÄ†ÊàêÁöÑ„ÄÇphp-fpm ÊÖ¢Êó•ÂøóÁöÑÈÖçÁΩÆÂ¶Ç‰∏ãÔºörequest_slowlog_timeout = 5 //5Áßí‰ª•‰∏äÁöÑ ÂΩì‰∏Ä‰∏™ËØ∑Ê±ÇËØ•ËÆæÁΩÆÁöÑË∂ÖÊó∂Êó∂Èó¥ÂêéÔºåÂ∞±‰ºöÂ∞ÜÂØπÂ∫îÁöÑPHPË∞ÉÁî®Â†ÜÊ†à‰ø°ÊÅØÂÆåÊï¥ÂÜôÂÖ•Âà∞ÊÖ¢Êó•Âøó‰∏≠ ËÆæÁΩÆ‰∏∫ ‚Äò0‚Äô Ë°®Á§∫ ‚ÄòOff‚Äôslowlog = /var/log/php-fpm.slow.log //Êó•ÂøóÁõÆÂΩï ÂÜçÊâìÂºÄÊó•ÂøóÊñπÊ≥ïÊü•ÁúãÊòØÂì™‰∏™ÊñπÊ≥ïÊàñËÄÖÊìç‰ΩúÂØºËá¥ÁöÑ„ÄÇÁõ¥Êé•‰øÆÊîπ‰ª£Á†Å„ÄÇphp-fpm ÊÖ¢Êó•Âøó ‰∏çÂª∫ËÆÆÂú®Áîü‰∫ßÁéØÂ¢É‰∏ã‰ΩøÁî® https://my.oschina.net/u/3503791/blog/908623]]></content>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginx 500ÈîôËØØÊÄªÁªì]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2FNginx%20500%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[500ÔºàÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØÔºâ ÊúçÂä°Âô®ÈÅáÂà∞ÈîôËØØÔºåÊó†Ê≥ïÂÆåÊàêËØ∑Ê±Ç„ÄÇ501ÔºàÂ∞öÊú™ÂÆûÊñΩÔºâ ÊúçÂä°Âô®‰∏çÂÖ∑Â§áÂÆåÊàêËØ∑Ê±ÇÁöÑÂäüËÉΩ„ÄÇ‰æãÂ¶ÇÔºåÂΩìÊúçÂä°Âô®Êó†Ê≥ïËØÜÂà´ËØ∑Ê±ÇÊñπÊ≥ïÊó∂ÔºåÊúçÂä°Âô®ÂèØËÉΩ‰ºöËøîÂõûÊ≠§‰ª£Á†Å„ÄÇ502ÔºàÈîôËØØÁΩëÂÖ≥Ôºâ ÊúçÂä°Âô®‰Ωú‰∏∫ÁΩëÂÖ≥Êàñ‰ª£ÁêÜÔºå‰ªé‰∏äÊ∏∏ÊúçÂä°Âô®Êî∂Âà∞‰∫ÜÊó†ÊïàÁöÑÂìçÂ∫î„ÄÇ503ÔºàÊúçÂä°‰∏çÂèØÁî®Ôºâ ÁõÆÂâçÊó†Ê≥ï‰ΩøÁî®ÊúçÂä°Âô®ÔºàÁî±‰∫éË∂ÖËΩΩÊàñËøõË°åÂÅúÊú∫Áª¥Êä§Ôºâ„ÄÇÈÄöÂ∏∏ÔºåËøôÂè™ÊòØ‰∏ÄÁßçÊöÇÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ504ÔºàÁΩëÂÖ≥Ë∂ÖÊó∂Ôºâ ÊúçÂä°Âô®‰Ωú‰∏∫ÁΩëÂÖ≥Êàñ‰ª£ÁêÜÔºåÊú™ÂèäÊó∂‰ªé‰∏äÊ∏∏ÊúçÂä°Âô®Êé•Êî∂ËØ∑Ê±Ç„ÄÇ505ÔºàHTTP ÁâàÊú¨‰∏çÂèóÊîØÊåÅÔºâ ÊúçÂä°Âô®‰∏çÊîØÊåÅËØ∑Ê±Ç‰∏≠ÊâÄ‰ΩøÁî®ÁöÑ HTTP ÂçèËÆÆÁâàÊú¨„ÄÇ Nginx 500ÈîôËØØÔºàInternal Server Error ÂÜÖÈÉ®ÊúçÂä°Âô®ÈîôËØØÔºâÔºö500ÈîôËØØÊåáÁöÑÊòØÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØÔºå‰πüÂ∞±ÊòØÊúçÂä°Âô®ÈÅáÂà∞ÊÑèÂ§ñÊÉÖÂÜµÔºåËÄåÊó†Ê≥ïÂ±•Ë°åËØ∑Ê±Ç„ÄÇ 500ÈîôËØØ‰∏ÄËà¨ÊúâÂá†ÁßçÊÉÖÂÜµÔºö webËÑöÊú¨ÈîôËØØÔºåÂ¶ÇphpËØ≠Ê≥ïÈîôËØØÔºåluaËØ≠Ê≥ïÈîôËØØÁ≠â„ÄÇ ËÆøÈóÆÈáèÂ§ßÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÁ≥ªÁªüËµÑÊ∫êÈôêÂà∂ÔºåËÄå‰∏çËÉΩÊâìÂºÄËøáÂ§öÁöÑÊñá‰ª∂ ‰∏ÄËà¨ÂàÜÊûêÊÄùË∑ØÔºö Ôºà1ÔºâÊü•Áúãnginx error log ÔºåÊü•Áúãphp error log Ôºà2ÔºâÂ¶ÇÊûúÊòØtoo many open filesÔºå‰øÆÊîπnginxÁöÑworker_rlimit_nofileÂèÇÊï∞Ôºå‰ΩøÁî®ulimitÊü•ÁúãÁ≥ªÁªüÊâìÂºÄÊñá‰ª∂ÈôêÂà∂Ôºå‰øÆÊîπ/etc/security/limits.conf Ôºà3ÔºâÂ¶ÇÊûúÊòØËÑöÊú¨ÁöÑÈóÆÈ¢òÔºåÂàôÈúÄË¶Å‰øÆÂ§çËÑöÊú¨ÈîôËØØÔºåÂπ∂‰ºòÂåñ‰ª£Á†Å Ôºà4ÔºâÂêÑÁßç‰ºòÂåñÈÉΩÂÅöÂ•ΩÔºåËøòÊòØÂá∫Áé∞too many open filesÔºåÈÇ£Â∞±Ë¶ÅËÄÉËôëÂÅöË¥üËΩΩÂùáË°°ÔºåÊääÊµÅÈáèÂàÜÊï£Âà∞‰∏çÂêåÊúçÂä°Âô®‰∏äÂéª‰∫Ü„ÄÇ ÈîôËØØÂéüÂõ†ÊÄªÁªìÔºö 1„ÄÅÁ°¨ÁõòÁ©∫Èó¥Êª°‰∫Ü ‰ΩøÁî® df -k Êü•ÁúãÁ°¨ÁõòÁ©∫Èó¥ÊòØÂê¶Êª°‰∫Ü„ÄÇÊ∏ÖÁêÜÁ°¨ÁõòÁ©∫Èó¥Â∞±ÂèØ‰ª•Ëß£ÂÜ≥500ÈîôËØØ„ÄÇnginxÂ¶ÇÊûúÂºÄÂêØ‰∫Üaccess logÔºåÂú®‰∏çÈúÄË¶ÅÁöÑÊÉÖÂÜµ‰∏ãÔºåÊúÄÂ•ΩÂÖ≥Èó≠access log„ÄÇaccess log‰ºöÂç†Áî®Â§ßÈáèÁ°¨ÁõòÁ©∫Èó¥„ÄÇ 2„ÄÅnginxÈÖçÁΩÆÊñá‰ª∂ÈîôËØØ ËøôÈáå‰∏çÊòØÊåáËØ≠Ê≥ïÈîôËØØÔºånginxÂ¶ÇÊûúÈÖçÁΩÆÊñá‰ª∂ÊúâËØ≠Ê≥ïÈîôËØØÔºåÂêØÂä®ÁöÑÊó∂ÂÄôÂ∞±‰ºöÊèêÁ§∫„ÄÇÂΩìÈÖçÁΩÆrewriteÁöÑÊó∂ÂÄôÔºåÊúâ‰∫õËßÑÂàôÂ§ÑÁêÜ‰∏çÂΩì‰ºöÂá∫Áé∞500ÈîôËØØÔºåËØ∑‰ªîÁªÜÊ£ÄÊü•Ëá™Â∑±ÁöÑrewriteËßÑÂàô„ÄÇÂ¶ÇÊûúÈÖçÁΩÆÊñá‰ª∂ÈáåÊúâ‰∫õÂèòÈáèËÆæÁΩÆ‰∏çÂΩìÔºå‰πü‰ºöÂá∫Áé∞500ÈîôËØØÔºåÊØîÂ¶ÇÂºïÁî®‰∫Ü‰∏Ä‰∏™Ê≤°ÊúâÂÄºÁöÑÂèòÈáè„ÄÇ 3„ÄÅÂ¶ÇÊûú‰∏äÈù¢ÁöÑÈóÆÈ¢òÈÉΩ‰∏çÂ≠òÂú®ÂèØËÉΩÊòØÊ®°ÊãüÁöÑÂπ∂ÂèëÊï∞Â§™Â§ö‰∫ÜÔºåÈúÄË¶ÅË∞ÉÊï¥‰∏Ä‰∏ãnginx.confÁöÑÂπ∂ÂèëËÆæÁΩÆÊï∞ Ëß£ÂÜ≥ÊñπÊ≥ïÊòØÔºö 1 ÊâìÂºÄ/etc/security/limits.confÊñá‰ª∂ÔºåÂä†‰∏ä‰∏§Âè• Â§çÂà∂‰ª£Á†Å‰ª£Á†ÅÂ¶Ç‰∏ã: soft nofile 65535 hard nofile 65535 2 ÊâìÂºÄ/etc/nginx/nginx.confÂú®worker_processesÁöÑ‰∏ãÈù¢Â¢ûÂä†‰∏ÄË°å Â§çÂà∂‰ª£Á†Å‰ª£Á†ÅÂ¶Ç‰∏ã:worker_rlimit_nofile 65535; 3 ÈáçÊñ∞ÂêØÂä®nginxÔºåÈáçÊñ∞ËΩΩÂÖ•ËÆæÁΩÆ Â§çÂà∂‰ª£Á†Å‰ª£Á†ÅÂ¶Ç‰∏ã:kill -9 ps -ef | grep php | grep -v grep | awk &#39;{print $2}&#39;/usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 100 -u www-data -f /usr/bin/php-cgikillall -HUP nginxÈáçÂêØÂêéÂÜçÁúãnginxÁöÑÈîôËØØÊó•ÂøóÔºå‰πüÊ≤°ÊúâÂèëÁé∞500Êä•ÈîôÁöÑÊÉÖÂÜµ‰∫Ü„ÄÇ 4„ÄÅÊúâÂèØËÉΩÊòØÊï∞ÊçÆÂ∫ìÈóÆÈ¢òÊàëÁöÑÂú®nginxÊó•ÂøóphpÊó•ÂøóÈÉΩÊ≤°ÊúâÂèëÁé∞‰ªÄ‰πàÈóÆÈ¢ò, ÊúÄÂêéÂèëÁé∞Êï∞ÊçÆÂ∫ìËÆøÈóÆ‰∏ç‰∫Ü,‰øÆÊ≠£ÂêéÈóÆÈ¢òËß£ÂÜ≥„ÄÇ ÂèÇËÄÉÔºö http://www.cnblogs.com/huqiang/p/5333975.html]]></content>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHPÊÖ¢Êó•Âøóslow_log]]></title>
    <url>%2F2017%2F11%2F27%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2FPHP%E6%85%A2%E6%97%A5%E5%BF%97slow-log%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp; php-fpmÊÖ¢Êó•Âøóslowl_ogËÆæÁΩÆÂèØ‰ª•ËÆ©ÂºÄÂèëËÄÖÂæàÂ•ΩÁöÑÊü•ÊâæÂì™‰∫õphpËøõÁ®ãÈÄüÂ∫¶ËøáÊÖ¢ËÄåÂØºËá¥ÁöÑÁΩëÁ´ôÈóÆÈ¢òÔºåËÆ©ÂºÄÂèëËÄÖÊñπ‰æøÁöÑÊâæÂà∞ÈóÆÈ¢òÁöÑÊâÄÂú®„ÄÇËØ•ÊñπÊ≥ïÂêåÊ†∑ÈÄÇÁî®‰∫éÊéíÊü•nginxÁöÑ500„ÄÅ502ÈóÆÈ¢òÊ†πÊ∫êÔºåÂΩìnginxÊî∂Âà∞Â¶Ç‰∏äÈîôËØØÁ†ÅÊó∂ÔºåÂèØ‰ª•Á°ÆÂÆöÂêéÁ´Øphp-fpmËß£ÊûêphpÂá∫‰∫ÜÊüêÁßçÈóÆÈ¢òÔºåÊØîÂ¶ÇÔºåÊâßË°åÈîôËØØÔºåÊâßË°åË∂ÖÊó∂Á≠â„ÄÇ ÂèÇÊï∞ËÆæÁΩÆphp-fpm.confÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Êúâ‰∏Ä‰∏™ÂèÇÊï∞request_slowlog_timeoutÊòØËøôÊ†∑ÊèèËø∞ÁöÑÔºö ; The timeout for serving a single request after which a PHP backtrace will be dumped to the ‚Äòslowlog‚Äô file. A value of ‚Äò0s‚Äô means ‚Äòoff‚Äô.; Available units: s(econds)(default), m(inutes), h(ours), or d(ays); Default Value: 0; request_slowlog_timeout = 0 121. ÂΩìrequest_slowlog_timeoutËÆæ‰∏∫‰∏Ä‰∏™ÂÖ∑‰ΩìÁßíÊó∂,ÊØîÂ¶Çrequest_slowlog_timeout =5ÔºåË°®Á§∫Â¶ÇÊûúÂì™‰∏™ËÑöÊú¨ÊâßË°åÊó∂Èó¥Â§ß‰∫é5ÁßíÔºå‰ºöËÆ∞ÂΩïËøô‰∏™ËÑöÊú¨Âà∞ÊÖ¢Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ2. request_slowlog_timeout =0Ë°®Á§∫ÂÖ≥Èó≠ÊÖ¢Êó•ÂøóËæìÂá∫ Êó•Âøó‰ΩçÁΩÆËÆæÁΩÆÊÖ¢Êó•ÂøóÊñá‰ª∂‰ΩçÁΩÆÈªòËÆ§Âú®phpÁöÑÂÆâË£ÖÁõÆÂΩï‰∏ãÁöÑlogÊñá‰ª∂Â§π‰∏≠ÔºåÂèØ‰ª•ÈÄöËøá‰øÆÊîπslowlog = log/$pool.log.slowÂèÇÊï∞Êù•ÊåáÂÆö,Â¶Ç‰∏ãÔºåÊÖ¢Êó•Âøó‰ºöËÆ∞ÂΩï‰∏ãËøõÁ®ãÂè∑ÔºåËÑöÊú¨ÂêçÁß∞ÔºåÂÖ∑‰ΩìÂì™‰∏™Êñá‰ª∂Âì™Ë°å‰ª£Á†ÅÁöÑÂì™‰∏™ÂáΩÊï∞ÊâßË°åÊó∂Èó¥ËøáÈïøÔºö 1234[21-Nov-2013 14:30:38] [pool www] pid 11877script_filename = /usr/local/nginx/html/www.quancha.cn/www/fyzb.php[0xb70fb88c] file_get_contents() /usr/local/nginx/html/www.quancha.cn/www/fyzb.php:2[21-Nov-2013 14:15:23] ERROR: [pool www] &apos;slowlog&apos; must be specified for use with &apos;request_slowlog_timeout&apos; request_slowlog_timeout Âíå slowlog ÈúÄË¶ÅÂêåÊó∂ËÆæÁΩÆ ÈúÄË¶ÅÊâãÂä®ÂàõÂª∫slowlogÊñá‰ª∂Â§π Êó•ÂøóËØ¥ÊòéÂºÄÂêØÂêéÔºåÂ¶ÇÊûúÊúâËÑöÊú¨ÊâßË°åË∂ÖËøáÊåáÂÆöÁöÑÊó∂Èó¥ÔºåÂ∞±‰ºöÂú®ÊåáÂÆöÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠ÂÜôÂÖ•Á±ª‰ººÂ¶Ç‰∏ãÁöÑ‰ø°ÊÅØÔºö 1234[19-Dec-2013 16:54:49] [pool www] pid 18575script_filename = /home/web/htdocs/sandbox_canglong/test/tt.php[0x0000000003a00dc8] curl_exec() /home/web/htdocs/sandbox_canglong/test/tt.php:2[0x0000000003a00cd0] exfilter_curl_get() /home/web/htdocs/sandbox_canglong/test/tt.php:6 Êó•ÂøóËØ¥ÊòéÔºö script_filename ÊòØÂÖ•Âè£Êñá‰ª∂ curl_exec() Ôºö ËØ¥ÊòéÊòØÊâßË°åËøô‰∏™ÊñπÊ≥ïÁöÑÊó∂ÂÄôË∂ÖËøáÊâßË°åÊó∂Èó¥ÁöÑ„ÄÇ exfilter_curl_get() ÔºöËØ¥ÊòéË∞ÉÁî®curl_exec()ÁöÑÊñπÊ≥ï exfilter_curl_get() „ÄÇ ÊØèË°åÂÜíÂè∑ÂêéÈù¢ÁöÑÊï∞Â≠óÊòØË°åÂè∑ ÂºÄÂêØÂêéÔºåÂú®ÈîôËØØÊó•ÂøóÊñá‰ª∂‰∏≠‰πüÊúâÁõ∏ÂÖ≥ËÆ∞ÂΩï„ÄÇÂ¶Ç‰∏ã 1234[19-Dec-2013 15:55:37] WARNING: [pool www] child 18575, script &apos;/home/web/htdocs/sandbox_canglong/test/tt.php&apos; (request: &quot;GET /test/tt.php&quot;) executing too slow (1.006222 sec), logging[19-Dec-2013 15:55:37] NOTICE: child 18575 stopped for tracing[19-Dec-2013 15:55:37] NOTICE: about to trace 18575[19-Dec-2013 15:55:37] NOTICE: finished trace of 18575 ‰ΩøÁî®‰∏æ‰æãÈóÆÈ¢ò‰∏ÄÊèèËø∞ÔºöÂú®‰∏ÄÊ¨°nginxÂ∫îÁî®Êõ¥Êñ∞ÁöÑÁÅ∞Â∫¶ËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÈÄâÂèñ‰∏ÄÂè∞nginx‰∏äÁ∫øÔºåËßÇÂØüÊé•‰∏ãÊù•ÁöÑÂçäÂ∞èÊó∂ÂÜÖÔºånginxÂç†Áî®ÂÜÖÂ≠ò‰∏çÊñ≠Â¢ûÂ§ßÔºåÁõ¥Âà∞ËÄóÂ∞ΩÁ≥ªÁªüËµÑÊ∫ê„ÄÇ ÈóÆÈ¢ò‰∏ÄÊéíÊü•Ê≠•È™§Ôºö ÊéíÊü•error_log‰∏≠Âπ∂Ê≤°ÊúâÈîôËØØ‰ø°ÊÅØÔºõ ÁõëÊéßÂèëÁé∞Êñ∞‰∏äÁ∫øÁöÑnginxÊµÅÈáèÂ§ßÂ¢ûÔºõ ÂàÜÊûêaccess_logÂèëÁé∞Êñ∞‰∏äÁ∫øÁöÑnginxÁöÑQPSÊòØÂéüÊú∫Âô®ÁöÑ6~8ÂÄç„ÄÇ ËØÅÂÆûÊòØKeepalivedÂØºËá¥ÊµÅÈáèË¥üËΩΩ‰∏çÂùáË°°„ÄÇLVS‰Ωú‰∏∫Ë¥üËΩΩÂùáË°°Êó∂ÔºåÂêéÁ´ØÁöÑnignxÈÖçÁΩÆÁöÑkeepalive_timeoutÊó∂Èó¥ÊúâÂ∑ÆÂºÇÂØºËá¥„ÄÇ LVSÁöÑË¥üËΩΩÂùáË°°ÊòØTCPÂ±ÇÁöÑÔºåÂè™ËÉΩÂÅöËøûÊé•ÁöÑÂùáË°°ÔºåÂ¶ÇÊûúKeepaliveÊó∂Èó¥ËÆæÁΩÆÁöÑË∂ÖÈïøÔºå‰ºöÂØºËá¥Ë∑ØÁî±Âà∞Ëøô‰∏™ËøûÊé•ÁöÑËØ∑Ê±ÇË∂äÂ§ö ÈóÆÈ¢ò‰∫åÊèèËø∞ÔºönginxÂÅöÂèçÂêë‰ª£ÁêÜÔºåÊúâÊó∂ÂèëÁé∞Êüê‰∫õÊé•Âè£ËæÉÊÖ¢ÔºåÈÄöÂ∏∏ÈÉΩÂú®3sÂ∑¶Âè≥„ÄÇ ÈóÆÈ¢ò‰∫åÊéíÊü•Ê≠•È™§Ôºö ÈÖçÁΩÆnginxÁöÑaccess logËÆ∞ÂΩïupstream_response_time ÂàÜÊûêÂèëÁé∞ÂìçÂ∫îÂ§ßÁ∫¶3sÂ§ö„ÄÇ ÂàÜÊûêÂêéÁ´ØÁöÑaccess_logÔºåÂ§ÑÁêÜÊó∂Èó¥ÈÉΩÂú®ÊØ´ÁßíÁ∫ßÂà´„ÄÇËøôËØ¥ÊòéÈóÆÈ¢òÊòØÁî±‰∫énginxË∑üÂêéÁ´ØconnectËæÉÊÖ¢ÂØºËá¥ ÂèÇËÄÉÂçöÂÆ¢Ôºö http://blog.csdn.net/leonpengweicn/article/details/42494813 http://www.bo56.com/%E5%96%84%E7%94%A8php-fpm%E7%9A%84%E6%85%A2%E6%89%A7%E8%A1%8C%E6%97%A5%E5%BF%97slow-log%EF%BC%8C%E5%88%86%E6%9E%90php%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/]]></content>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018Á†îÂèëÊ†°ÊãõÈù¢Áªè]]></title>
    <url>%2F2017%2F11%2F22%2F%E6%9D%82%E8%B0%88%2F2018%E7%A0%94%E5%8F%91%E6%A0%A1%E6%8B%9B%E9%9D%A2%E7%BB%8F%2F</url>
    <content type="text"><![CDATA[Â∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÂøÖÂÖàÂà©ÂÖ∂Âô® ÈòøÈáå„ÄÅËÖæËÆØ ÈòøÈáåÈù¢ËØïÈ¢òÊÄªÁªì ÁôæÂ∫¶„ÄÅ‰∫¨‰∏ú„ÄÅËòëËèáË°ó„ÄÅËÖæËÆØ ÈòøÈáå„ÄÅÂçé‰∏∫„ÄÅÊª¥Êª¥„ÄÅÁôæÂ∫¶„ÄÅÊê∫Á®ã„ÄÅÁà±Â•áËâ∫„ÄÅÁæéÂõ¢ ÁôæÂ∫¶„ÄÅ‰∫¨‰∏ú„ÄÅÊª¥Êª¥„ÄÅÊñ∞Êµ™ ÁôæÂ∫¶„ÄÅËÖæËÆØ„ÄÅÁΩëÊòì„ÄÅ360„ÄÅÂéªÂì™ÁΩë ÁôæÂ∫¶„ÄÅÂ§¥Êù°„ÄÅÊª¥Êª¥„ÄÅÈòøÈáå„ÄÅÊêúÁãê ËÖæËÆØ„ÄÅÊª¥Êª¥„ÄÅÈòøÈáå„ÄÅÁΩëÊòì„ÄÅÂ∞èÁ±≥„ÄÅ‰∫¨‰∏ú„ÄÅÁæéÂõ¢„ÄÅÁôæÂ∫¶ ÁæéÂõ¢„ÄÅËöÇËöÅÈáëÊúç„ÄÅÈòøÈáå ËöÇËöÅÈáëÊúç„ÄÅÊê∫Á®ã„ÄÅÁæéÂõ¢„ÄÅ58 ÁæéÂõ¢„ÄÅËÖæËÆØ„ÄÅÁôæÂ∫¶ ÈòøÈáå„ÄÅÁæéÂõ¢„ÄÅÂêåËä±È°∫ ÈòøÈáå„ÄÅÂ∞èÁ±≥„ÄÅÊêúÁãó„ÄÅÁæéÂõ¢„ÄÅÁôæÂ∫¶„ÄÅËÖæËÆØ„ÄÅ‰æøÂà©ËúÇ ËöÇËöÅÈáëÊúç„ÄÅÈìæÂÆ∂ ÈòøÈáå ËÖæËÆØ Â∞èÁ±≥ Âçé‰∏∫ Â§¥Êù°„ÄÅÁΩëÊòì„ÄÅÁæéÂõ¢„ÄÅgoogle„ÄÅ‰∫¨‰∏ú ËÖæËÆØ„ÄÅÈòøÈáå ÁôæÂ∫¶„ÄÅÈòøÈáå ËöÇËöÅÈáëÊúç„ÄÅ‰∫¨‰∏ú Áü•ËØÜÁÇπÊÄªÁªì Áü•ËØÜÁÇπÊÄªÁªì Áü•ËØÜÁÇπÊÄªÁªì ‰π¶Á±ç Èù¢ËØï‰π¶Á±ç È´òÁ∫ßÁÆóÊ≥ï Ê†°ÊãõÂøÉË∑ØÊÄªÁªì Ê†°ÊãõÂéÜÁ®ã Ê†°ÊãõÂéÜÁ®ã Ê†°ÊãõÂéÜÁ®ã Â§ßÊï∞ÊçÆÈù¢ÁªèÔºåÈòøÈáåÔºåÁôæÂ∫¶ÔºåÂ§¥Êù°ÔºåÊª¥Êª¥ÔºåÁæéÂõ¢Ôºå‰∫¨‰∏úÔºåÊê∫Á®ã ÈìæÂÆ∂„ÄÅ58„ÄÅÁæéÂõ¢„ÄÅÊª¥Êª¥„ÄÅÂ§¥Êù°„ÄÅÁôæÂ∫¶„ÄÅËÖæËÆØ Áü•ËØÜÁÇπ]]></content>
      <categories>
        <category>Èù¢ËØï</category>
      </categories>
      <tags>
        <tag>Ê†°Êãõ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈáçÂêØËøúÁ®ãlinux‰∏ªÊú∫]]></title>
    <url>%2F2017%2F11%2F21%2Flinux%2F%E9%87%8D%E5%90%AF%E8%BF%9C%E7%A8%8Blinux%E4%B8%BB%E6%9C%BA%2F</url>
    <content type="text"><![CDATA[Âú®ÁªàÁ´Ø‰∏äÂà©Áî®sshÔºå‰∏çÁôªÂΩïËøúÁ®ã‰∏ªÊú∫ÔºåÁõ¥Êé•ÂèëÈÄÅÈáçÂêØÂëΩ‰ª§ 1ssh root@192.168.8.128 &apos;reboot&apos;]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPÂ∏∏ËßÅÁä∂ÊÄÅÁ†Å]]></title>
    <url>%2F2017%2F11%2F20%2Fhttp%2FHTTP%E5%B8%B8%E8%A7%81%E7%8A%B6%E6%80%81%E7%A0%81%2F</url>
    <content type="text"><![CDATA[400ÈîôËØØ - ËØ∑Ê±ÇÊó†Êïà (Bad request)499ÈîôËØØ]]></content>
  </entry>
  <entry>
    <title><![CDATA[HTTPÁä∂ÊÄÅÁ†ÅÂá∫Áé∞499ÈîôËØØ]]></title>
    <url>%2F2017%2F11%2F20%2Fhttp%2FHTTP%E7%8A%B6%E6%80%81%E7%A0%81%E5%87%BA%E7%8E%B0499%E9%94%99%E8%AF%AF%2F</url>
    <content type="text"></content>
      <categories>
        <category>Http</category>
      </categories>
      <tags>
        <tag>Http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ΩøÁî®‰∏ÉÁâõ‰∫ëÂÅöhexoÂõæÂ∫ä]]></title>
    <url>%2F2017%2F11%2F20%2F%E6%9D%82%E8%B0%88%2F%E4%BD%BF%E7%94%A8%E4%B8%83%E7%89%9B%E4%BA%91%E5%81%9Ahexo%E5%9B%BE%E5%BA%8A%2F</url>
    <content type="text"><![CDATA[‰ΩøÁî®‰∏ÉÁâõ‰∫ëÂ≠òÂÇ®ÂÅöÂõæÂ∫äÔºå‰∏∫hexoÂ≠òÂÇ®ÂºïÁî®ÂõæÁâá]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webÂ∏∏ËßÅÈóÆÈ¢òÊéíÊü•]]></title>
    <url>%2F2017%2F11%2F20%2F%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%2F%E5%BC%80%E5%8F%91%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[‰∏ÄËà¨ÊéíÊü•ÊñπÊ≥ï Ê£ÄÊü•error_log Ê£ÄÊü•access_log Ê£ÄÊü•slow_log linuxÂëΩ‰ª§Â∑•ÂÖ∑ tcpdumpÂàÜÊûêÁΩëÁªúÁä∂ÂÜµ Á®ãÂ∫èÁöÑgdbË∞ÉËØï error_logerror_logÊèê‰æõ‰∫ÜÊúâÂÖ≥ÂºÇÂ∏∏ÁöÑ‰∏∞ÂØå‰ø°: ÁΩëÁªúË∂ÖÊó∂Ôºöconnect,write,read timeout File not found HTTPÁä∂ÊÄÅÁ†Å &nbsp;&nbsp;&nbsp;&nbsp; ‰∏æ‰æãÊù•ËÆ≤ÔºåÊõ¥Êñ∞nginxÂêéÔºåhttpËØ∑Ê±Ç‰∏çËÉΩËøîÂõûÂÆåÊï¥Êï∞ÊçÆÔºåËøîÂõûÈÉ®ÂàÜÊï∞ÊçÆÂêéËØ∑Ê±ÇÂ∞±ÁªìÊùü‰∫ÜÔºåÊØèÊ¨°ÈÉΩËÉΩÂ§çÁé∞„ÄÇËøôÊó∂ÂÄôÊü•Áúãerror_log,ÁúãÂà∞ÊúâPermission deniedÈîôËØØÔºåÂç≥Êü•ÂÆû‰∏∫nginxÁöÑ‰∏¥Êó∂ÂÜôÁõÆÂΩïÊ≤°ÊúâÊùÉÈôêÊâÄÈÄ†Êàê„ÄÇ slow_log&nbsp;&nbsp;&nbsp;&nbsp;php-fpmÊÖ¢Êó•Âøóslowl_ogËÆæÁΩÆÂèØ‰ª•ËÆ©ÂºÄÂèëËÄÖÂæàÂ•ΩÁöÑÊü•ÊâæÂì™‰∫õphpËøõÁ®ãÈÄüÂ∫¶ËøáÊÖ¢ËÄåÂØºËá¥ÁöÑÁΩëÁ´ôÈóÆÈ¢òÔºåËÆ©ÂºÄÂèëËÄÖÊñπ‰æøÁöÑÊâæÂà∞ÈóÆÈ¢òÁöÑÊâÄÂú®„ÄÇËØ•ÊñπÊ≥ïÂêåÊ†∑ÈÄÇÁî®‰∫éÊéíÊü•nginxÁöÑ500„ÄÅ502ÈóÆÈ¢òÊ†πÊ∫êÔºåÂΩìnginxÊî∂Âà∞Â¶Ç‰∏äÈîôËØØÁ†ÅÊó∂ÔºåÂèØ‰ª•Á°ÆÂÆöÂêéÁ´Øphp-fpmËß£ÊûêphpÂá∫‰∫ÜÊüêÁßçÈóÆÈ¢òÔºåÊØîÂ¶ÇÔºåÊâßË°åÈîôËØØÔºåÊâßË°åË∂ÖÊó∂Á≠â„ÄÇ access_logÂØπaccess_logËøõË°åÁªüËÆ°ÂàÜÊûêÔºåÂèØ‰ª•ÂæàÂ•ΩÂú∞Â±ïÁ§∫‰∏éÁõëÊéßwebÊúçÂä°ÁöÑÁä∂ÊÄÅ„ÄÇÂåÖÊã¨200ËØ∑Ê±ÇÊ¨°Êï∞ÁöÑÂèòÂåñÔºåÊµÅÈáèÂ§ßÂ∞èÔºåÂêéÁ´ØÂìçÂ∫îÊó∂Èó¥Á≠â 1231. ÁªüËÆ°HTTPÁä∂ÊÄÅÁ†ÅÁöÑÊØî‰æãÔºåÂèØ‰ª•Áü•ÈÅìnginxÊúçÂä°ÂÅ•Â∫∑Áä∂ÂÜµÔºõ2. ÁªüËÆ°ÂìçÂ∫îÊó∂Èó¥ÔºåÂà§Êñ≠Ë∂ÖÊó∂ËØ∑Ê±Ç„ÄÇ3. ÁªüËÆ°QPSÔºåÂØπÊØîË¥üËΩΩÊòØÂê¶ÂùáË°°„ÄÇ linuxÂ∑•ÂÖ∑ÂëΩ‰ª§strace Ë∑üË∏™ËøõÁ®ã‰∏≠ÁöÑÁ≥ªÁªüË∞ÉÁî®‰ΩøÁî®straceÂëΩ‰ª§Â∑•ÂÖ∑ÂèØË∑üË∏™Á≥ªÁªüË∞ÉÁî®Âπ∂ÊâìÂç∞Âá∫‰∏∞ÂØåÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÁ≥ªÁªüË∞ÉÁî®ÂèëÁîüÁöÑÊó∂Èó¥ÔºåË∞ÉÁî®ËÄóÊó∂Ôºå‰º†ÈÄÅÁöÑÂèÇÊï∞ÔºåË∞ÉÁî®ËøîÂõûÁªìÊûúÁ≠âÁ≠â„ÄÇ 12345Â∏∏Áî®ÂèÇÊï∞ÊúâÔºö-tt ÊâìÂç∞Á≥ªÁªüË∞ÉÁî®ÂèëÁîüÁöÑÊó∂Èó¥-T ÊâìÂç∞Á≥ªÁªüË∞ÉÁî®ËÄóÊó∂-e &lt;name&gt; Ë∑üË∏™ÁâπÂÆöÁ≥ªÁªüË∞ÉÁî®ÔºåÊØîÂ¶Ç-e open,read,write,closeÊù•ËøΩË∏™Êñá‰ª∂Áõ∏ÂÖ≥Ë∞ÉÁî®-s &lt;size&gt; ÊåáÂÆöÊâìÂç∞ÁöÑÊúÄÂ§ßÈïøÂ∫¶ straceÂè™ËÉΩËøΩË∏™Á≥ªÁªüË∞ÉÁî®ÔºåÊôÆÈÄöÂáΩÊï∞ÊòØÊó†Ê≥ïËøΩË∏™ÁöÑ„ÄÇCPUÂæàÈ´òÔºåËØ¥ÊòéÁ®ãÂ∫è‰∏ÄÁõ¥Âú®Ë∑ëÔºå‰ΩÜstraceÊ≤°ÊúâÂºÇÂ∏∏ÔºåËØ¥ÊòéÊòØÁî®Êà∑Áä∂‰ª£Á†ÅÂú®Ê∂àËÄóCPU„ÄÇÈóÆÈ¢òÂøÖÂÆöÂá∫Áé∞Âú®Ëá™Â∑±Á®ãÂ∫èÈÄªËæë‰∏ä„ÄÇ tcpdumptcpdumpÊòØlinuxÊú¨Ë∫´Âæó‰æõÁöÑ‰∏ÄÊ¨æÂº∫Â§ßÁöÑÁΩëÁªúÊäìÂåÖÂ∑•ÂÖ∑„ÄÇÂØπ‰∫é‰∏§Âè∞ËÆæÂ§á‰πãÈó¥‰º†ËæìÁöÑÊï∞ÊçÆÊòØÂê¶Ê≠£Â∏∏Ôºå‰∏∫‰ΩïÂìçÂ∫îÊÖ¢Á≠âÁΩëÁªúÈóÆÈ¢òÔºåÈÉΩÂèØ‰ª•‰ΩøÁî®tcpdumpÊù•ÊäìÂåÖÊéíÊü•„ÄÇwindows‰∏ãÈù¢Êúâ‰∏ÄÊ¨æÂÖ∑ÊúâÂêåÊ†∑ÂäüËÉΩÁöÑÂ∑•ÂÖ∑ËΩØ‰ª∂‚Äìwireshark,‰πüÂæàÂ•ΩÁî®„ÄÇ ËøòËÆ∞ÂæóÂàöÊâçÁ§∫‰æã‰∏≠ÊèêÂà∞ÁöÑÊÖ¢ËøûÊé•ÂêßÔºåNginxÁöÑaccess_logÊòæÁ§∫ËØ∑Ê±ÇÂìçÂ∫îÊó∂Èó¥‰∏∫3sÂ§öÔºåËÄåÂêéÁ´ØÊòØÊØ´ÁßíËÆ°ÔºåËøôÁßçÊÖ¢Â∞±ÂèØ‰ª•‰ΩøÁî®tcpdumpÊù•ÊäìÂåÖÊü•Áúã‰∫Ü ÂèØ‰ª•ÁúãÂà∞ÂêéÁ´ØÂìçÂ∫îackËä±‰∫Ü3s.ËøôÁßçÊÖ¢ËøûÊé•ÔºåÊàë‰ª¨Á∫ø‰∏ä‰ºöÁªèÂ∏∏Á¢∞Âà∞„ÄÇÈÄöÂ∏∏nginxÂÅöÂèçÂêë‰ª£ÈáèËøûÊé•ÂêéÁ´ØÊó∂„ÄÅphpÁ®ãÂ∫èÂú®ËÆøÈóÆÂêéÁ´ØËµÑÊ∫êÊó∂„ÄÅ‰ª•ÂèäphpÁî®curlËØ∑Ê±ÇÂÖ∂‰ªñÊé•Âè£Êó∂ÔºåÁªèÂ∏∏Âá∫Áé∞ÊÖ¢ËøûÊé•ÁöÑÊÉÖÂÜµ„ÄÇËøô‰∫õÊÖ¢ËøûÊé•‰∫ßÁîüÁöÑÊ†πÊú¨ÂéüÂõ†Âú®‰∫éÔºö‚ÄìÊúçÂä°Á´ØlistenÊó∂ÔºåËÆæÁΩÆÁöÑbacklogÂ§™Â∞èÔºåÂØºËá¥ËøûÊé•ÈòüÂàóÂæàÂ∞èÔºõ‚ÄìËøûÊé•ÈòüÂàóÊª°Êó∂ÔºåÂØπ‰∫éÊñ∞ÁöÑËøûÊé•ËØ∑Ê±ÇÔºåÊúçÂä°Á´Ø‰ºöÁõ¥Êé•‰∏¢ÂºÉSYNÂåÖÔºõ‚ÄìSYNÂåÖÂàùÂßãÈáç‰º†Êó∂Èó¥‰∏∫3sÔºõ ÂÜç‰∏æ‰∏Ä‰∏ãÁªºÂêàÊ°à‰æãÔºöPHPÂçáÁ∫ßÂêéÔºåÂºÄÂßãËøêË°åÊ≠£Â∏∏Ôºå‰ΩÜÂá†Â§©ÂêéÔºåÁ≥ªÁªüË¥üËΩΩÁ™ÅÁÑ∂‰∏äÂçáÔºåËææÂà∞200-400Â∑¶Âè≥ÔºåCPU‰ΩøÁî®‰∏çÈ´òÔºåÂÜÖÂ≠ò‰ΩøÁî®‰∏çÈ´òÔºånetstatÂèëÁé∞Â§ßÈáèÁöÑPHPËøõÁ®ãÂ§Ñ‰∫éCLOSE_WAITÁä∂ÊÄÅ„ÄÇÊéíÊü•Ôºöerror_log‰∏éaccess_logÈÉΩÊ≤°ÊúâÈóÆÈ¢òÔºõnginx‰∏éPHP‰∏çÂú®Âêå‰∏ÄÂè∞Êú∫Âô®ÔºåÊöÇÊó∂Êó†Ê≥ïÊü•ÁúãÂÖ∂error_logÔºõCPU„ÄÅÂÜÖÂ≠òÈÉΩ‰∏çÈ´òÔºå‰∏∫‰ΩïË¥üËΩΩËøô‰πàÈ´òÔºüCLOSE_WAITÊòØÊÄé‰πàÈÄ†ÊàêÁöÑ Êàë‰ª¨ÂÖà‰ªéCLOSE_WAITÂÖ•ÊâãÔºåTCPÂÖ≥Èó≠ËøûÊé•ËøáÁ®ã‰∏≠ÔºåË¢´Âä®ÂÖ≥Èó≠ÁöÑ‰∏ÄÊñπÔºåÂú®Êé•Êî∂Âà∞ÂØπÊñπÁöÑFINÂêéÔºåÂèëÈÄÅËá™Â∑±ÁöÑFINÂâçÔºåËøô‰∏™Áä∂ÊÄÅÂ∞±ÊòØCLOSE_WAIT„ÄÇÁ≥ªÁªüË∞ÉÁî®closeÔºåÂÖ≥Èó≠ËøûÊé•ÔºåÂèëÈÄÅFIN ‰ªéCLOSE_WAITÁöÑÁä∂ÊÄÅÁúãÔºåPHPÂ∫îËØ•ÊòØÊ≤°ÊúâË∞ÉÁî®closeÂáΩÊï∞ÔºåÁ®ãÂ∫èÂèØËÉΩÂõ†‰∏∫ÊüêÁßçÂéüÂõ†Â†µÂ°ûÔºåËÄåÊó†Ê≥ïË∞ÉÁî®close„ÄÇÂêØÁî®straceËøΩË∏™PHPËøõÁ®ãÂà∞Â∫ïÂ†µÂ°ûÂú®Âì™Èáå„ÄÇstraceËøΩË∏™ÁªìÊûúÊù•ÁúãÔºåPHPËøõÁ®ãÊ≤°ÊúâÂ†µÂ°ûÔºå‰ΩÜwriteÂáΩÊï∞Ë∞ÉÁî®Â§±Ë¥•ÔºåBroken pipeËØ¥ÊòéËøûÊé•Â∑≤ÁªèÂÖ≥Èó≠ÔºåË∞ÉÁî®close‰∫Ü„ÄÇ ÁªßÁª≠straceÂàÜÊûêÔºåËøûÊé•‰∏∫‰ªÄ‰πàÂÖ≥Èó≠ÔºåÊòØÂêéÁ´ØPHPÂ§ÑÁêÜÂ§™ÊÖ¢ÂØºËá¥nginxË∂ÖÊó∂‰πàÔºü‰ªéstraceÁúãÂà∞ÔºåPHP‰ªéacceptÂà∞closeÔºåÊÄªÂÖ±ËÄóÊó∂1msÔºånginx‰∏çÂèØËÉΩË∂ÖÊó∂„ÄÇ Êàë‰ª¨ÂêØÂä®tcpdumpÊäìÂåÖÔºàwindows‰∏ã‰ΩøÁî®wiresharkÊü•ÁúãÔºâ ÂèëÁé∞3‰∏™ÂºÇÂ∏∏Ôºö‚Äì3Ê¨°Êè°ÊâãnginxÂèëÈÄÅÁöÑSYNÔºåPHPÂìçÂ∫îÊòØACKÔºåËÄå‰∏çÊòØSYN+ACK‚ÄìNginxÂèëÈÄÅFINÂÖ≥Èó≠ËøûÊé•ÂêéÔºåPHPÊ≤°ÊúâÂèëÈÄÅFIN‚ÄìÁ¨¨‰∫å‰∏™ËøûÊé•ÁöÑSYNÔºåPHPÂêåÊ†∑Âè™ËøîÂõûACKÔºå‰ΩÜACKÂ∫èÂàóÂè∑Âç¥ÊòØÁ°ÆËÆ§‰∏ä‰∏Ä‰∏™ËøûÊé•ÁöÑ„ÄÇ ÁªìÂêàstrace‰∏étcpdumpÊù•ÁúãÔºåacceptË∞ÉÁî®ÊØîÊé•Êî∂Âà∞SYNÊôö‰∫Ü2ÂàÜÈíü ËøôÈáåÂèØ‰ª•ÁúãÂà∞ÔºöSYN‰∏âÊ¨°Êè°ÊâãÂÆåÊàêÂêéÔºåsocketÊîæÂà∞‰∫ÜËøûÊé•ÈòüÂàóÈáåÔºåaccept‰ªéËøûÊé•ÈòüÂàóËé∑ÂèñsocketÔºåÂ¶ÇÊûúÈòüÂàóËøáÂ§ßÔºåÁ≠âÂà∞acceptÊ∂àË¥πÂà∞Ëøô‰∏™socketÔºåÂèØËÉΩÂ∑≤ÁªèË∂ÖÊó∂ÂÖ≥Èó≠ËøûÊé•„ÄÇÈòüÂàó‰∏≠ÂÖ≥Èó≠ÁöÑËøûÊé•Â§Ñ‰∫éCLOSE_WAITÁä∂ÊÄÅ„ÄÇËã•PHP‰∏Ä‰∏™ÂÖ≥Èó≠ÁöÑËøûÊé•ÔºåÂ∞±‰ºöÂá∫Áé∞Broken PipeÊä•ÈîôÁé∞Ë±°„ÄÇËøôÂÖ∂ÂÆûÂ∞±ÊòØbacklogËÆæÁΩÆËøáÂ§ßÂºïËµ∑„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºåwebÈóÆÈ¢òÊéíÈöúÂæàÂ§çÊùÇÔºåÊâæÂà∞Ê≠£Á°ÆÁöÑÊñπÂêëÂæàÈáçË¶Å„ÄÇÂ≠¶‰ºöÁúãlog‰∏éÁ≥ªÁªüÁä∂ÊÄÅÔºåÂ≠¶‰ºö‰ΩøÁî®ÁªüËÆ°Êï∞ÊçÆÔºàÂ∏∏Áî®ÁöÑ‰∏Ä‰∫õawk,grepÂëΩ‰ª§)ÔºåÁÜüÊÇâ‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÂ∑•ÂÖ∑„ÄÇÈóÆÈ¢ò‰∏ÄÂÆöÊòØÊúâÂéüÂõ†ÁöÑÔºåË¶ÅÊâæÂà∞root cause(ÁúüÊ≠£ÁöÑÊ†πÊú¨ÂéüÂõ†)]]></content>
      <categories>
        <category>ÈóÆÈ¢òÊéíÊü•</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∞èËØ¥Êé®Ëçê]]></title>
    <url>%2F2017%2F11%2F17%2F%E6%9D%82%E8%B0%88%2F%E5%B0%8F%E8%AF%B4%E6%8E%A8%E8%8D%90%2F</url>
    <content type="text"><![CDATA[‰øÆ‰ªô Âá°‰∫∫‰øÆ‰ªô‰º† ÈÅÆÂ§© ‰∏Ä‰ªôÈöæÊ±Ç ‰ªôÁÅµÂõæË∞± Âá°Â•≥‰ªôËë´ ÊÖ¢ÊÖ¢‰ªôÈÄî ‰øÆÁúü‰πã‰∏ä‰ªô ‰ªôÊú¨Á∫ØËâØ Â§©‰∏ã‚Ä¶ Êú∫Áî≤ ‰ø°‰∏ç‰ø°ÊàëÂêÉ‰∫Ü‰Ω† Êú∫Áî≤Êä§Áøº ÈáçÁîüÂè§Ë®Ä ‰πùÈáçÁ¥´ ÈáëÈôµÊò• ÊÖïÂçóÊûù Â∫∂Â•≥ÊîªÁï• Â´°Ë∞ã ÈáëÊûù Á©øË∂äÂè§Ë®Ä ÂêçÈó®Èó∫ÊùÄ Á©øË∂ä‰πã‰∏ëÂ§´ ‰∏á‰∫ãÂ¶ÇÊÑè Êñ∞ÂîêÈÅóÁéâ Áü•Âê¶ÔºåÁü•Âê¶ÔºüÂ∫îÊòØÁ∫¢ËÇ•ÁªøÁò¶ ÂÆãÂè≤ ÊüîÁ¶èÂ∏ùÂß¨ Â≠§ÂüéÈó≠ Âæ°Â§©È¶ô Ê∏ÖÊúù Ê∞∏ÂíåÂÆ´‰∏ª Ê∏ÖÁ©øÊó•Â∏∏ ‰∏äÂè§Á•ûËØù ÊõæËÆ∏ËØ∫ È¶ôËúúÊ≤âÊ≤âÁÉ¨Â¶ÇÈúú ‰∏âÁîü‰∏â‰∏ñÂçÅÈáåÊ°ÉËä± ‰∏âÁîü‰∏â‰∏ñÊûï‰∏ä‰π¶ ÈïøÁõ∏ÊÄù ÂçéËÉ•Âºï Ê∏∏Êàè ÂæÆÂæÆ‰∏ÄÁ¨ëÂæàÂÄæÂüé Áé©‰∏™Â§©‰∏ãÂ•ΩËÉÉÁñº Áé∞‰ª£Ë®ÄÊÉÖ ‰Ωï‰ª•Á¨ôÁÆ´Èªò ÂéüÊù•‰Ω†ËøòÂú®ËøôÈáå Ëá¥Êàë‰ª¨ÁªàÂ∞ÜÈÄùÂéªÁöÑÈùíÊò• Â±±Êúà‰∏çÁü•ÂøÉÂ∫ï‰∫ã ÈùíÊ¢ÖÁ´πÈ©¨ ÁôæËä±Ê∑±Â§Ñ Â®áÊúØ Ëä±ÂºÄÈî¶Áª£ Á∫¢Ëå±ËÆ∞ ÁÉ≠Ë°ÄÈùíÊò• Êã©Â§©ËÆ∞]]></content>
      <categories>
        <category>Â∞èËØ¥</category>
      </categories>
      <tags>
        <tag>novel</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[phpÈ≠îÊúØÊñπÊ≥ï]]></title>
    <url>%2F2017%2F11%2F17%2Fphp%2F%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[PHP Â∞ÜÊâÄÊúâ‰ª• ÂºÄÂ§¥ÁöÑÁ±ªÊ≥ï‰øù ‰∏∫È≠îÊúØÊñπÊ≥ï„ÄÇÊâÄ‰ª•Âú®ÂÆö‰πâÁ±ªÊñπÊ≥ïÊó∂ÔºåÈô§‰∫Ü‰∏äËø∞È≠îÊúØÊñπÊ≥ïÔºåÂª∫ËÆÆ‰∏çË¶Å‰ª• ‰∏∫ÂâçÁºÄ ‰∏Ä„ÄÅÊñπÊ≥ïÁÆÄ‰ªã __construct()ÔºåÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂú®Âêå‰∏Ä‰∏™Á±ª‰∏≠Âè™ËÉΩÂ£∞Êòé‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ï php‰∏çÊîØÊåÅÈáçËΩΩÔºåÂ¶ÇÈúÄË¶ÅÁà∂Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÈúÄÊòæÂºèË∞ÉÁî® __destruct()ÔºåÁ±ªÁöÑÊûêÊûÑÂáΩÊï∞ÔºåÊûêÊûÑÊñπÊ≥ïÂÖÅËÆ∏Âú®ÈîÄÊØÅÊï¥‰∏™Á±ª‰πãÂâçÊâßË°åÁöÑÊüê‰∫õÊìç‰ΩúÔºåÊó†ÂèÇÊï∞ call()„ÄÅcallStatic()ÔºåÊñπÊ≥ïÈáçËΩΩÔºåË∞ÉÁî®Êú™ÂÆö‰πâËøáÁöÑ(ÈùôÊÄÅ)ÊñπÊ≥ïÊó∂Ë¢´Ë∞ÉÁî®,ÂèØ‰ª•‰ΩøÁî®__callËøõË°åÂèãÂñÑÁöÑÈîôËØØÂ§ÑÁêÜÔºåÈÅøÂÖçÂΩìË∞ÉÁî®‰∏çÂ≠òÂú®ÁöÑÊñπÊ≥ïÊó∂‰∫ßÁîüÈîôËØØÔºåÊÑèÂ§ñÁöÑÂØºËá¥Á®ãÂ∫è‰∏≠Ê≠¢ Â±ûÊÄßÈáçËΩΩ 12345&lt;?phppublic void __set ( string $name , mixed $value )public mixed __get ( string $name )public bool __isset ( string $name )public void __unset ( string $name ) __clone()Â§çÂà∂Êó∂Ë∞ÉÁî®ÔºåÂ§çÂà∂Êó∂ÂºïÁî®Â§çÂà∂ÔºàÊµÖÂ§çÂà∂ÔºâÔºåÁªìÂêàcloneÂÖ≥ÈîÆÂ≠óÂÆûÁé∞ÁúüÊ≠£ÁöÑÂ§çÂà∂ autoload()‰ΩúÁî®: ÊòØÂΩì‰Ω†Ë∞ÉÁî®‰∏çÂ≠òÂú®ÁöÑÁ±ªÊó∂‰ºöË¢´Âä®Ë∞ÉÁî®Ôºå‰∏çÂª∫ËÆÆ‰ΩøÁî®ÔºåÂéüÂõ†:autoload()ÈáçÂ§çÂÆö‰πâÊó∂ÔºåÂÜ≤Á™ÅÊä•ÈîôÔºåÂè™ËÉΩÊúâ‰∏Ä‰∏™__autoload()ÂáΩÊï∞ 12345678&lt;?phpfunction __autoload($class)&#123; if(file_exists($class.".php"))&#123; require_once($class.".php"); &#125; else &#123; die("Êñá‰ª∂‰∏çÂ≠òÂú®!"); &#125;&#125; Êé®Ëçê‰ΩøÁî®spl_autoload_register() 1234567891011121314151617181920&lt;?phpfunction my_autoload1($class)&#123; if(file_exists("classes/".$class.".php"))&#123; require_once("classes/".$class.".php"); &#125; else &#123; die("Êñá‰ª∂‰∏çÂ≠òÂú®!"); &#125; &#125; function my_autoload2($class)&#123; if(file_exists("core/".$class.".php"))&#123; require_once("core/".$class.".php"); &#125;else&#123; die("Êñá‰ª∂‰∏çÂ≠òÂú®!"); &#125;&#125; //Â∞ÜÂä†ËΩΩÂáΩÊï∞Ê≥®ÂÜåÂà∞PHP‰∏≠spl_autoload_register("my_autoload1");spl_autoload_register("my_autoload2"); __sleep()Âú®ÂØπ‰∏Ä‰∏™ÂØπË±°Â∫èÂàóÂåñÊó∂(Ë∞ÉÁî®serialize()Êó∂)‰ºöË¢´Ë∞ÉÁî®„ÄÇÂÆÉ‰∏çÊé•Êî∂‰ªª‰ΩïÂèÇÊï∞ÔºåËÄå‰∏îÂ∫îËØ•ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÊâÄÊúâÂ∫îËØ•Ë¢´Â∫èÂàóÂåñÁöÑÂ±ûÊÄßÁöÑÊï∞ÁªÑ; __wakeup()Âú®ÂØπÂ≠òÂÇ®ÁöÑÂØπË±°ÂèçÂ∫èÂàóÂåñÊó∂‰ºöË¢´Ë∞ÉÁî®; __toString() :Âú®Êàë‰ª¨Â∞ÜÂØπË±°ÂΩì‰ΩúÂ≠óÁ¨¶‰∏≤‰∏ÄÊ†∑‰ΩøÁî®Êó∂‰ºöË¢´Ë∞ÉÁî®; __set_state:‰ΩøÁî®var_export()ÂáΩÊï∞ËæìÂá∫ÂØπË±°Êó∂‰ºöË∞ÉÁî®ËØ•ÊñπÊ≥ï __debugInfo(): ÊâìÂç∞Ë∞ÉËØï‰ø°ÊÅØÊó∂Ë∞ÉÁî® __invoke() :‰ΩøÁî®Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÊñπÂºèË∞É‰∏Ä‰∏™ÂØπË±°Êó∂Ë∞ÉÁî®ËØ•ÂáΩÊï∞ 123456789101112131415161718&lt;?phpclass Person &#123; public $sex; public $name; public $age; public function __construct($name="", $age=25, $sex='Áî∑')&#123; $this-&gt;name = $name; $this-&gt;age = $age; $this-&gt;sex = $sex; &#125; public function __invoke() &#123; echo 'ËøôÊòØ ‰∏™ÂØπË±°'; &#125; &#125; $person = new Person('jack');$person(); ‰∫å„ÄÅ AOPÂú®PHP‰∏≠ÁöÑÂÆûÁé∞&emsp;&emsp;Âú®‰º†ÁªüÁöÑOOP(Èù¢ÂêëÂØπË±°ÁºñÁ®ã:Object-Oriented Programming)ÊÄùÊÉ≥ Ôºå‰∏ÄËà¨ÊääÂ∫îÁî®Á®ãÂ∫èÂàÜËß£ÊàêËã•Âπ≤‰∏™ÂØπË±°ÔºåÂº∫Ë∞ÉÈ´òÂÜÖËÅöÔºåÂº±ËÄ¶ÂêàÔºå‰ªéËÄåÊèêÈ´òÂ∫îÁî®Á®ãÂ∫èÁöÑÊ®°ÂùóÂåñÁ®ãÂ∫¶Ôºå‰ΩÜÊòØÂú®Â§ÑÁêÜÊüê‰∫õÈóÆÈ¢òÁöÑÊó∂ÂÄôÔºåOOP‰ºöÊòæÂæó‰∏çÂ§üÁÅµÊ¥ª,ÊØîÂ¶ÇËØ¥: 1234Â∫îÁî®Á®ãÂ∫èÂæàÂ§ö‰∏öÂä°ÈÄªËæëÈÉΩË¶ÅÂú®Êìç‰Ωú‰πãÂàùËøõ ‚ÄúÊùÉÈôêÊ£ÄÊü•‚ÄùÔºåÂú®Êìç‰Ωú‰πãÂêéËøõË°å‚ÄúÊó•ÂøóËÆ∞ÂΩï‚ÄùÔºåÂ¶ÇÊûúÁõ¥Êé•ÊääÂ§ÑÁêÜÈÄªËæëÁõ¥Êé•Âä†Âà∞ÊØè‰∏™Ê®°Âùó‰∏≠ÔºåÈÇ£‰πàÊó†ÁñëÁ†¥Âùè‰∫ÜOOPÁöÑ‚ÄúÂçï‰∏ÄËÅåË¥£‚ÄùÂéüÂàôÔºåÊ®°ÂùóÁöÑÂèØÈáçÁî®Â∞±‰ºöÂ§ßÂ§ßÈôç‰ΩéÔºåËøôÊó∂ÂÄô‰º†ÁªüÁöÑOOPËÆæËÆ°ÂæÄÂæÄÈááÂèñÁöÑÁ≠ñÁï•ÊòØÂä†Â¶ÇÁõ∏Â∫îÁöÑ‰ª£ÁêÜ(Proxy)Â±ÇÊù•ÂÆåÊàêÁ≥ªÁªüÁöÑÂäüËÉΩË¶ÅÊ±ÇÔºå‰ΩÜËøôÊ†∑ÁöÑÂ§ÑÁêÜÊòéÊòæ‰ΩøÁ≥ªÁªüÊï¥‰ΩìÂ¢ûÂä†‰∏Ä‰∏™Â±ÇÊ¨°ÁöÑÂàíÂàÜÔºåÂ§çÊùÇÊÄß‰πüÈöè‰πãÂ¢ûÂä†Ôºå‰ªéËÄåÁªô‰∫∫Ëøá‰∫éÂéöÈáçÁöÑÊÑüËßâ„ÄÇ &emsp;&emsp;Ê≠£ÊòØ‰∏∫‰∫ÜÂ§ÑÁêÜËøôÊ†∑ÁöÑÈóÆÈ¢òÔºåAOP(Èù¢ÂêëÂàáÈù¢ÁºñÁ®ã:Aspect-Oriented Programming)ÊÄùÊÉ≥Â∫îËøêËÄåÁîüÔºåÂÅáËÆæÊääÂ∫îÁî®Á®ãÂ∫èÊÉ≥Êàê‰∏Ä‰∏™Á´ã‰ΩìÁªìÊûÑÁöÑËØùÔºåOOPÁöÑÂàÉÊòØÁ∫µÂêëÂàáÂÖ•Á≥ªÁªüÔºåÊääÁ≥ªÁªüÂàíÂàÜ‰∏∫ÂæàÂ§ö‰∏™Ê®°Âùó(Â¶Ç:Áî®Êà∑Ê®°ÂùóÔºåÊñáÁ´†Ê®°ÂùóÁ≠â)Ôºå AOPÁöÑÂàÄÂàÉÊòØÊ®™ÂêëÂàáÂàÜÁ≥ªÁªüÔºåÊèêÂèñÂêÑ‰∏™Ê®°ÂùóÂèØËÉΩÈÉΩË¶ÅÈáçÂ§çÊìç‰ΩúÁöÑÈÉ®ÂàÜ(Â¶Ç:ÊùÉÈôêÊ£ÄÊü•ÔºåÊó•ÂøóËÆ∞ÂΩïÁ≠âÁ≠â)„ÄÇÁî±Ê≠§ÂèØËßÅÔºåAOPÊòØOOPÁöÑ‰∏Ä‰∏™ÊúâÊïàË°•ÂÖÖ„ÄÇ 1234Â∞±ÁõÆÂâçÁöÑPHPÊù•ËØ¥ÔºåËøòÊ≤°Êúâ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑAOPÂÜÖÁΩÆÂÆûÁé∞ÔºåËôΩÁÑ∂Âá∫Áé∞ RunKitÔºå‰ΩÜ‰º∞ËÆ°ÂæàÈïøÊó∂Èó¥ÂÜÖ‰∏çÂ§™ÂèØËÉΩÊàê‰∏∫PHPÁöÑÁº∫ÁúÅËÆæÁΩÆ„ÄÇÈÇ£ÊòØ‰πàÊòØAOPÂú®PHPÂèØ‰ª•ÂÆûÁé∞Âêó?ÂΩìÁÑ∂ÔºåÂõ†‰∏∫Êàë‰ª¨Êúâget()Ôºåset()Ôºå__call()Á≠âÈ≠îÊúØÊñπÊ≥ïÔºåÁªìÂêàËµ∑Êù•‰ΩøÁî®Ëøô‰∫õÊñπÊ≥ïÂèØ‰ª•‰∏∫Êàë‰ª¨ÂÆûÁé∞ÊüêÁßçÁ®ãÂ∫¶ÁöÑ‚ÄúÂáÜAOP‚ÄùÔºå‰πãÊâÄ‰ª•ËØ¥ÊòØÂáÜAOPÔºåÊòØÂõ†‰∏∫ÂçïÂçï‰ªéÂÆûÁé∞‰∏äÊù•ÁúãÔºåÁß∞ÂÖ∂‰∏∫AOPÊúâ‰∫õÁâµÂº∫Ôºå‰ΩÜÊòØ‰ªéÊïàÊûú‰∏äÊù•ÁúãÔºåÂèàÈÉ®ÂàÜÂÆûÁé∞ AOPÁöÑ‰ΩúÁî®ÔºåËôΩÁÑ∂ÂÖ∂ÂÆûÁé∞ÊñπÂºèÂπ∂‰∏çÂÆåÁæéÔºå‰ΩÜÂØπ‰∫é‰∏ÄËà¨ÁöÑ‰ΩøÁî®Â∑≤ÁªèÂ§ü‰∫Ü„ÄÇ ‰∏â„ÄÅÈ≠îÊúØÂèòÈáè LINE: Êñá‰ª∂‰∏≠ÁöÑÂΩìÂâçË°åÂè∑„ÄÇ FILE: Êñá‰ª∂ÁöÑÂÆåÊï¥Ë∑ØÂæÑÂíåÊñá‰ª∂Âêç„ÄÇÂΩìÂú®Ë¢´ÂåÖÂê´Êñá‰ª∂‰∏≠ÔºåÂàôËøîÂõûË¢´ÂåÖÂê´ÁöÑÊñá‰ª∂Âêç DIR: Êñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï„ÄÇÂ¶ÇÊûúÁî®Âú®Ë¢´ÂåÖÊã¨Êñá‰ª∂‰∏≠ÔºåÂàôËøîÂõûË¢´ÂåÖÊã¨ÁöÑÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï„ÄÇ FUNCTION: Â∏∏ÈáèÔºåËøîÂõûËØ•ÂáΩÊï∞Ë¢´ÂÆö‰πâÊó∂ÁöÑÂêçÂ≠ó CLASS: Â∏∏ÈáèÔºåËøîÂõûËØ•Á±ªË¢´ÂÆö‰πâÊó∂ÁöÑÂêçÂ≠ó(Âå∫ÂàÜÂ§ßÂ∞èÂÜô)„ÄÇ METHOD:ËøîÂõûËØ•ÊñπÊ≥ïË¢´ÂÆö‰πâÊó∂ÁöÑÂêçÂ≠ó(Âå∫ÂàÜÂ§ßÂ∞èÂÜô)„ÄÇ7.NAMESPACE:ÂΩìÂâçÂëΩÂêçÁ©∫Èó¥ÁöÑÂêçÁß∞(Âå∫ÂàÜÂ§ßÂ∞èÂÜô) Âõõ„ÄÅË∂ÖÂÖ®Â±ÄÂèòÈáè $GLOBALS:ÂÇ®Â≠òÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠ÁöÑÂèòÈáè„ÄÇ $_SERVER:Ëé∑ÂèñÊúçÂä°Âô®Áõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ $_REQUEST:Ëé∑ÂèñPOSTÂíåGETËØ∑Ê±ÇÁöÑÂèÇÊï∞ $_POST:Ëé∑ÂèñË°®ÂçïÁöÑPOSTËØ∑Ê±ÇÂèÇÊï∞ $_GET:Ëé∑ÂèñË°®ÂçïÁöÑGETËØ∑Ê±ÇÂèÇÊï∞ $_FILES:Ëé∑Âèñ‰∏ä‰º†Êñá‰ª∂ÁöÑÁöÑÂèòÈáè $_ENV:Ëé∑ÂèñÊúçÂä°Âô®Á´ØÁéØÂ¢ÉÂèòÈáèÁöÑÊï∞ÁªÑ $_COOKIE:ÊµèËßàÂô®cookieÁöÑÊìç‰Ωú $_SESSION:ÊúçÂä°Á´ØsessionÁöÑÊìç‰Ωú ‰∫î„ÄÅÁªìËØ≠&emsp;&emsp;PHP‰∏≠ÁöÑ‚ÄùÈáçËΩΩ‚Äù‰∏éÂÖ∂ÂÆÉÁªùÂ§ßÂ§öÊï∞Èù¢ÂêëÂØπË±°ËØ≠Ë®Ä‰∏çÂêå„ÄÇ‰º†ÁªüÁöÑ‚ÄùÈáçËΩΩ‚ÄùÊòØÊèê‰æõÂ§ö‰∏™ÂêåÂêçÁöÑÁ±ªÊñπÊ≥ïÔºå‰ΩÜÂêÑÊñπÊ≥ïÁöÑÂèÇÊï∞Á±ªÂûãÂíå‰∏™Êï∞‰∏çÂêå„ÄÇ PHPÊâÄÊèê‰æõÁöÑ‚ÄùÈáçËΩΩ‚Äù(overloading)ÊòØÊåáÂä®ÊÄÅÂú∞‚ÄùÂàõÂª∫‚ÄùÁ±ªÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇ ÂΩìË∞ÉÁî®ÂΩìÂâçÁéØÂ¢É‰∏ãÊú™ÂÆö‰πâÊàñ ‰∏çÂèØËßÅÁöÑÁ±ªÂ±ûÊÄßÊàñÊñπÊ≥ïÊó∂ÔºåÈáçËΩΩÊñπÊ≥ï‰ºöË¢´Ë∞ÉÁî®]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentosÂÆâË£Öphp7]]></title>
    <url>%2F2017%2F11%2F16%2Fphp%2FCentos7%E5%AE%89%E8%A3%85php7%2F</url>
    <content type="text"><![CDATA[#php7 yumÂÆâË£Ö ##ÂìàÂìàÂìàÂìàÂä†ËΩΩ 1hello word]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>php7</tag>
      </tags>
  </entry>
</search>
